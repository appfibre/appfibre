{"version":3,"file":"webapp-systemjs.js","sources":["../../../node_modules/.pnpm/registry.npmjs.org/systemjs/3.1.6/node_modules/systemjs/dist/s.js","../../../node_modules/.pnpm/registry.npmjs.org/systemjs/3.1.6/node_modules/systemjs/dist/extras/named-exports.js","../../../node_modules/.pnpm/registry.npmjs.org/systemjs/3.1.6/node_modules/systemjs/dist/extras/named-register.js","../../../node_modules/.pnpm/registry.npmjs.org/systemjs/3.1.6/node_modules/systemjs/dist/extras/amd.js","../../../node_modules/.pnpm/registry.npmjs.org/pinkie/2.0.4/node_modules/pinkie/index.js","../../types/dist/app/UI.js","../../types/dist/app/index.js","../../types/dist/webapp/index.js","../../types/dist/registry/index.js","../../types/dist/index.js","../../core/dist/components/BaseComponent.js","../../core/dist/components/Async.js","../../core/dist/components/index.js","../../core/dist/services/Data.js","../../core/dist/services/Events.js","../../core/dist/services/loaders/Browser.js","../../core/dist/services/loaders/NodeJs.js","../../core/dist/services/Loader.js","../../core/dist/services/Parsers.js","../../core/dist/services/Processor.js","../../core/dist/services/Navigation.js","../../core/dist/services/Transformer.js","../../core/dist/services/index.js","../../core/dist/app.js","../../core/dist/index.js","../../webapp/dist/components/ui.js","../../webapp/dist/services/WebUI.js","../../webapp/dist/WebApp.js","../../webapp/dist/services/Parsers.js","../../webapp/dist/services/Transformer.js","../../webapp/dist/services/index.js","../../webapp/dist/index.js","../lib/system.js"],"sourcesContent":["/*\n* SJS 3.1.6\n* Minimal SystemJS Build\n*/\n(function () {\n  const hasSelf = typeof self !== 'undefined';\r\n\r\n  const envGlobal = hasSelf ? self : global;\r\n\r\n  let baseUrl;\r\n  if (typeof location !== 'undefined') {\r\n    baseUrl = location.href.split('#')[0].split('?')[0];\r\n    const lastSepIndex = baseUrl.lastIndexOf('/');\r\n    if (lastSepIndex !== -1)\r\n      baseUrl = baseUrl.slice(0, lastSepIndex + 1);\r\n  }\r\n\r\n  const backslashRegEx = /\\\\/g;\r\n  function resolveIfNotPlainOrUrl (relUrl, parentUrl) {\r\n    if (relUrl.indexOf('\\\\') !== -1)\r\n      relUrl = relUrl.replace(backslashRegEx, '/');\r\n    // protocol-relative\r\n    if (relUrl[0] === '/' && relUrl[1] === '/') {\r\n      return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\r\n    }\r\n    // relative-url\r\n    else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\r\n        relUrl.length === 1  && (relUrl += '/')) ||\r\n        relUrl[0] === '/') {\r\n      const parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\r\n      // Disabled, but these cases will give inconsistent results for deep backtracking\r\n      //if (parentUrl[parentProtocol.length] !== '/')\r\n      //  throw new Error('Cannot resolve');\r\n      // read pathname from parent URL\r\n      // pathname taken to be part after leading \"/\"\r\n      let pathname;\r\n      if (parentUrl[parentProtocol.length + 1] === '/') {\r\n        // resolving to a :// so we need to read out the auth and host\r\n        if (parentProtocol !== 'file:') {\r\n          pathname = parentUrl.slice(parentProtocol.length + 2);\r\n          pathname = pathname.slice(pathname.indexOf('/') + 1);\r\n        }\r\n        else {\r\n          pathname = parentUrl.slice(8);\r\n        }\r\n      }\r\n      else {\r\n        // resolving to :/ so pathname is the /... part\r\n        pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/'));\r\n      }\r\n\r\n      if (relUrl[0] === '/')\r\n        return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\r\n\r\n      // join together and split for removal of .. and . segments\r\n      // looping the string instead of anything fancy for perf reasons\r\n      // '../../../../../z' resolved to 'x/y' is just 'z'\r\n      const segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\r\n\r\n      const output = [];\r\n      let segmentIndex = -1;\r\n      for (let i = 0; i < segmented.length; i++) {\r\n        // busy reading a segment - only terminate on '/'\r\n        if (segmentIndex !== -1) {\r\n          if (segmented[i] === '/') {\r\n            output.push(segmented.slice(segmentIndex, i + 1));\r\n            segmentIndex = -1;\r\n          }\r\n        }\r\n\r\n        // new segment - check if it is relative\r\n        else if (segmented[i] === '.') {\r\n          // ../ segment\r\n          if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\r\n            output.pop();\r\n            i += 2;\r\n          }\r\n          // ./ segment\r\n          else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\r\n            i += 1;\r\n          }\r\n          else {\r\n            // the start of a new segment as below\r\n            segmentIndex = i;\r\n          }\r\n        }\r\n        // it is the start of a new segment\r\n        else {\r\n          segmentIndex = i;\r\n        }\r\n      }\r\n      // finish reading out the last segment\r\n      if (segmentIndex !== -1)\r\n        output.push(segmented.slice(segmentIndex));\r\n      return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\r\n    }\r\n  }\n\n  /*\r\n   * SystemJS Core\r\n   * \r\n   * Provides\r\n   * - System.import\r\n   * - System.register support for\r\n   *     live bindings, function hoisting through circular references,\r\n   *     reexports, dynamic import, import.meta.url, top-level await\r\n   * - System.getRegister to get the registration\r\n   * - Symbol.toStringTag support in Module objects\r\n   * - Hookable System.createContext to customize import.meta\r\n   * - System.onload(id, err?) handler for tracing / hot-reloading\r\n   * \r\n   * Core comes with no System.prototype.resolve or\r\n   * System.prototype.instantiate implementations\r\n   */\r\n\r\n  const hasSymbol = typeof Symbol !== 'undefined';\r\n  const toStringTag = hasSymbol && Symbol.toStringTag;\r\n  const REGISTRY = hasSymbol ? Symbol() : '@';\r\n\r\n  function SystemJS () {\r\n    this[REGISTRY] = {};\r\n  }\r\n\r\n  const systemJSPrototype = SystemJS.prototype;\r\n  systemJSPrototype.import = function (id, parentUrl) {\r\n    const loader = this;\r\n    return Promise.resolve(loader.resolve(id, parentUrl))\r\n    .then(function (id) {\r\n      const load = getOrCreateLoad(loader, id);\r\n      return load.C || topLevelLoad(loader, load);\r\n    });\r\n  };\r\n\r\n  // Hookable createContext function -> allowing eg custom import meta\r\n  systemJSPrototype.createContext = function (parentId) {\r\n    return {\r\n      url: parentId\r\n    };\r\n  };\r\n\r\n  let lastRegister;\r\n  systemJSPrototype.register = function (deps, declare) {\r\n    lastRegister = [deps, declare];\r\n  };\r\n\r\n  /*\r\n   * getRegister provides the last anonymous System.register call\r\n   */\r\n  systemJSPrototype.getRegister = function () {\r\n    const _lastRegister = lastRegister;\r\n    lastRegister = undefined;\r\n    return _lastRegister;\r\n  };\r\n\r\n  function getOrCreateLoad (loader, id, firstParentUrl) {\r\n    let load = loader[REGISTRY][id];\r\n    if (load)\r\n      return load;\r\n\r\n    const importerSetters = [];\r\n    const ns = Object.create(null);\r\n    if (toStringTag)\r\n      Object.defineProperty(ns, toStringTag, { value: 'Module' });\r\n    \r\n    let instantiatePromise = Promise.resolve()\r\n    .then(function () {\r\n      return loader.instantiate(id, firstParentUrl);\r\n    })\r\n    .then(function (registration) {\r\n      if (!registration)\r\n        throw new Error('Module ' + id + ' did not instantiate');\r\n      function _export (name, value) {\r\n        // note if we have hoisted exports (including reexports)\r\n        load.h = true;\r\n        let changed = false;\r\n        if (typeof name !== 'object') {\r\n          if (!(name in ns) || ns[name] !== value) {\r\n            ns[name] = value;\r\n            changed = true;\r\n          }\r\n        }\r\n        else {\r\n          for (let p in name) {\r\n            let value = name[p];\r\n            if (!(p in ns) || ns[p] !== value) {\r\n              ns[p] = value;\r\n              changed = true;\r\n            }\r\n          }\r\n        }\r\n        if (changed)\r\n          for (let i = 0; i < importerSetters.length; i++)\r\n            importerSetters[i](ns);\r\n        return value;\r\n      }\r\n      const declared = registration[1](_export, registration[1].length === 2 ? {\r\n        import: function (importId) {\r\n          return loader.import(importId, id);\r\n        },\r\n        meta: loader.createContext(id)\r\n      } : undefined);\r\n      load.e = declared.execute || function () {};\r\n      return [registration[0], declared.setters || []];\r\n    });\r\n\r\n    const linkPromise = instantiatePromise\r\n    .then(function (instantiation) {\r\n      return Promise.all(instantiation[0].map(function (dep, i) {\r\n        const setter = instantiation[1][i];\r\n        return Promise.resolve(loader.resolve(dep, id))\r\n        .then(function (depId) {\r\n          const depLoad = getOrCreateLoad(loader, depId, id);\r\n          // depLoad.I may be undefined for already-evaluated\r\n          return Promise.resolve(depLoad.I)\r\n          .then(function () {\r\n            if (setter) {\r\n              depLoad.i.push(setter);\r\n              // only run early setters when there are hoisted exports of that module\r\n              // the timing works here as pending hoisted export calls will trigger through importerSetters\r\n              if (depLoad.h || !depLoad.I)\r\n                setter(depLoad.n);\r\n            }\r\n            return depLoad;\r\n          });\r\n        })\r\n      }))\r\n      .then(function (depLoads) {\r\n        load.d = depLoads;\r\n      });\r\n    });\r\n\r\n    linkPromise.catch(function (err) {\r\n      load.e = null;\r\n      load.er = err;\r\n    });\r\n\r\n    // Captial letter = a promise function\r\n    return load = loader[REGISTRY][id] = {\r\n      id: id,\r\n      // importerSetters, the setters functions registered to this dependency\r\n      // we retain this to add more later\r\n      i: importerSetters,\r\n      // module namespace object\r\n      n: ns,\r\n\r\n      // instantiate\r\n      I: instantiatePromise,\r\n      // link\r\n      L: linkPromise,\r\n      // whether it has hoisted exports\r\n      h: false,\r\n\r\n      // On instantiate completion we have populated:\r\n      // dependency load records\r\n      d: undefined,\r\n      // execution function\r\n      // set to NULL immediately after execution (or on any failure) to indicate execution has happened\r\n      // in such a case, pC should be used, and pLo, pLi will be emptied\r\n      e: undefined,\r\n\r\n      // On execution we have populated:\r\n      // the execution error if any\r\n      er: undefined,\r\n      // in the case of TLA, the execution promise\r\n      E: undefined,\r\n\r\n      // On execution, pLi, pLo, e cleared\r\n\r\n      // Promise for top-level completion\r\n      C: undefined\r\n    };\r\n  }\r\n\r\n  function instantiateAll (loader, load, loaded) {\r\n    if (!loaded[load.id]) {\r\n      loaded[load.id] = true;\r\n      // load.L may be undefined for already-instantiated\r\n      return Promise.resolve(load.L)\r\n      .then(function () {\r\n        return Promise.all(load.d.map(function (dep) {\r\n          return instantiateAll(loader, dep, loaded);\r\n        }));\r\n      })\r\n    }\r\n  }\r\n\r\n  function topLevelLoad (loader, load) {\r\n    return load.C = instantiateAll(loader, load, {})\r\n    .then(function () {\r\n      return postOrderExec(loader, load, {});\r\n    })\r\n    .then(function () {\r\n      return load.n;\r\n    });\r\n  }\r\n\r\n  // the closest we can get to call(undefined)\r\n  const nullContext = Object.freeze(Object.create(null));\r\n\r\n  // returns a promise if and only if a top-level await subgraph\r\n  // throws on sync errors\r\n  function postOrderExec (loader, load, seen) {\r\n    if (seen[load.id])\r\n      return;\r\n    seen[load.id] = true;\r\n\r\n    if (!load.e) {\r\n      if (load.er)\r\n        throw load.er;\r\n      if (load.E)\r\n        return load.E;\r\n      return;\r\n    }\r\n\r\n    // deps execute first, unless circular\r\n    let depLoadPromises;\r\n    load.d.forEach(function (depLoad) {\r\n      {\r\n        const depLoadPromise = postOrderExec(loader, depLoad, seen);\r\n        if (depLoadPromise)\r\n          (depLoadPromises = depLoadPromises || []).push(depLoadPromise);\r\n      }\r\n    });\r\n    if (depLoadPromises) {\r\n      return Promise.all(depLoadPromises).then(doExec);\r\n    }\r\n\r\n    return doExec();\r\n\r\n    function doExec () {\r\n      try {\r\n        let execPromise = load.e.call(nullContext);\r\n        if (execPromise) {\r\n          execPromise = execPromise.then(function () {\r\n              load.C = load.n;\r\n              load.E = null;\r\n            });\r\n          return load.E = load.E || execPromise;\r\n        }\r\n        // (should be a promise, but a minify optimization to leave out Promise.resolve)\r\n        load.C = load.n;\r\n      }\r\n      catch (err) {\r\n        load.er = err;\r\n        throw err;\r\n      }\r\n      finally {\r\n        load.L = load.I = undefined;\r\n        load.e = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  envGlobal.System = new SystemJS();\n\n  /*\r\n   * Supports loading System.register via script tag injection\r\n   */\r\n\r\n  let err;\r\n  if (typeof window !== 'undefined')\r\n    window.addEventListener('error', function (e) {\r\n      err = e.error;\r\n    });\r\n\r\n  const systemRegister = systemJSPrototype.register;\r\n  systemJSPrototype.register = function (deps, declare) {\r\n    err = undefined;\r\n    systemRegister.call(this, deps, declare);\r\n  };\r\n\r\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\r\n    const loader = this;\r\n    return new Promise(function (resolve, reject) {\r\n      const script = document.createElement('script');\r\n      script.charset = 'utf-8';\r\n      script.async = true;\r\n      script.crossOrigin = 'anonymous';\r\n      script.addEventListener('error', function () {\r\n        reject(new Error('Error loading ' + url + (firstParentUrl ? ' from ' + firstParentUrl : '')));\r\n      });\r\n      script.addEventListener('load', function () {\r\n        document.head.removeChild(script);\r\n        // Note URL normalization issues are going to be a careful concern here\r\n        if (err) {\r\n          reject(err);\r\n          return err = undefined;\r\n        }\r\n        else {\r\n          resolve(loader.getRegister());\r\n        }\r\n      });\r\n      script.src = url;\r\n      document.head.appendChild(script);\r\n    });\r\n  };\n\n  /*\r\n   * Supports loading System.register in workers\r\n   */\r\n\r\n  if (hasSelf && typeof importScripts === 'function')\r\n    systemJSPrototype.instantiate = function (url) {\r\n      const loader = this;\r\n      return new Promise(function (resolve, reject) {\r\n        try {\r\n          importScripts(url);\r\n        }\r\n        catch (e) {\r\n          reject(e);\r\n        }\r\n        resolve(loader.getRegister());\r\n      });\r\n    };\n\n  systemJSPrototype.resolve = function (id, parentUrl) {\r\n    const resolved = resolveIfNotPlainOrUrl(id, parentUrl || baseUrl);\r\n    if (!resolved) {\r\n      if (id.indexOf(':') !== -1)\r\n        return Promise.resolve(id);\r\n      throw new Error('Cannot resolve \"' + id + (parentUrl ? '\" from ' + parentUrl : '\"'));\r\n    }\r\n    return Promise.resolve(resolved);\r\n  };\n\n}());\n","/*\r\n * Named exports support for legacy module formats in SystemJS 2.0\r\n */\r\n(function () {\r\n  const systemPrototype = System.constructor.prototype;\r\n  \r\n  // hook System.register to know the last declaration binding\r\n  let lastRegisterDeclare;\r\n  const systemRegister = systemPrototype.register;\r\n  systemPrototype.register = function (deps, declare) {\r\n    lastRegisterDeclare = declare;\r\n    systemRegister.call(this, deps, declare);\r\n  };\r\n\r\n  const getRegister = systemPrototype.getRegister;\r\n  systemPrototype.getRegister = function () {\r\n    const register = getRegister.call(this);\r\n    // if it is an actual System.register call, then its ESM\r\n    // -> dont add named exports\r\n    if (!register || register[1] === lastRegisterDeclare || register[1].length === 0)\r\n      return register;\r\n    \r\n    // otherwise it was provided by a custom instantiator\r\n    // -> extend the registration with named exports support\r\n    const registerDeclare = register[1];\r\n    register[1] = function (_export, _context) {\r\n      // hook the _export function to note the default export\r\n      let defaultExport;\r\n      const declaration = registerDeclare.call(this, function (name, value) {\r\n        if (name === 'default')\r\n          defaultExport = value;\r\n        _export(name, value);\r\n      }, _context);\r\n      // hook the execute function\r\n      const execute = declaration.execute;\r\n      if (execute)\r\n        declaration.execute = function () {\r\n          execute.call(this);\r\n          // do a bulk export of the default export object\r\n          // to export all its names as named exports\r\n          if (typeof defaultExport === 'object')\r\n            _export(defaultExport);\r\n        };\r\n      return declaration;\r\n    };\r\n    return register;\r\n  };\r\n})();","/*\r\n * SystemJS named register extension\r\n * Supports System.register('name', [..deps..], function (_export, _context) { ... })\r\n * \r\n * Names are written to the registry as-is\r\n * System.register('x', ...) can be imported as System.import('x')\r\n */\r\n(function () {\r\n  const systemJSPrototype = System.constructor.prototype;\r\n\r\n  const constructor = System.constructor;\r\n  const SystemJS = function () {\r\n    constructor.call(this);\r\n    this.registerRegistry = Object.create(null);\r\n  };\r\n  SystemJS.prototype = systemJSPrototype;\r\n  System = new SystemJS();\r\n\r\n  const register = systemJSPrototype.register;\r\n  systemJSPrototype.register = function (name, deps, declare) {\r\n    if (typeof name !== 'string')\r\n      return register.apply(this, arguments);\r\n\r\n    this.registerRegistry[name] = [deps, declare];\r\n\r\n    // Provide an empty module to signal success.\r\n    return register.call(this, [], function () { return {}; });\r\n  };\r\n\r\n  const resolve = systemJSPrototype.resolve;\r\n  systemJSPrototype.resolve = function (id, parentURL) {\r\n    if (id[0] === '/' || id[0] === '.' && (id[1] === '/' || id[1] === '.' && id[2] === '/'))\r\n      return resolve.call(this, id, parentURL);\r\n    if (id in this.registerRegistry)\r\n      return id;\r\n    return resolve.call(this, id, parentURL);\r\n  };\r\n\r\n  const instantiate = systemJSPrototype.instantiate;\r\n  systemJSPrototype.instantiate = function (url, firstParentUrl) {\r\n    return this.registerRegistry[url] || instantiate.call(this, url, firstParentUrl);\r\n  };\r\n})();","/*\r\n * Support for AMD loading\r\n */\r\n(function (global) {\r\n  const systemPrototype = System.constructor.prototype;\r\n\r\n  const emptyInstantiation = [[], function () { return {} }];\r\n\r\n  function unsupportedRequire () {\r\n    throw new Error('AMD require not supported.');\r\n  }\r\n\r\n  function emptyFn () {}\r\n\r\n  const requireExportsModule = ['require', 'exports', 'module'];\r\n\r\n  function createAMDRegister (amdDefineDeps, amdDefineExec) {\r\n    const exports = {};\r\n    const module = { exports: exports };\r\n    const depModules = [];\r\n    const setters = [];\r\n    let splice = 0;\r\n    for (let i = 0; i < amdDefineDeps.length; i++) {\r\n      const id = amdDefineDeps[i];\r\n      const index = setters.length;\r\n      if (id === 'require') {\r\n        depModules[i] = unsupportedRequire;\r\n        splice++;\r\n      }\r\n      else if (id === 'module') {\r\n        depModules[i] = module;\r\n        splice++;\r\n      }\r\n      else if (id === 'exports') {\r\n        depModules[i] = exports;\r\n        splice++;\r\n      }\r\n      else {\r\n        // needed for ie11 lack of iteration scope\r\n        const idx = i;\r\n        setters.push(function (ns) {\r\n          depModules[idx] = ns.default;\r\n        });\r\n      }\r\n      if (splice)\r\n        amdDefineDeps[index] = id;\r\n    }\r\n    if (splice)\r\n      amdDefineDeps.length -= splice;\r\n    const amdExec = amdDefineExec;\r\n    return [amdDefineDeps, function (_export) {\r\n      _export('default', exports);\r\n      return {\r\n        setters: setters,\r\n        execute: function () {\r\n          module.exports = amdExec.apply(exports, depModules) || module.exports;\r\n          if (exports !== module.exports)\r\n            _export('default', module.exports);\r\n        }\r\n      };\r\n    }];\r\n  }\r\n\r\n  // hook System.register to know the last declaration binding\r\n  let lastRegisterDeclare;\r\n  const systemRegister = systemPrototype.register;\r\n  // if we have named register support continue to use it\r\n  if (systemRegister.length === 3) {\r\n    systemPrototype.register = function (name, deps, declare) {\r\n      if (typeof name !== 'string')\r\n        lastRegisterDeclare = deps;\r\n      systemRegister.apply(this, arguments);\r\n    };\r\n  }\r\n  else {\r\n    systemPrototype.register = function (deps, declare) {\r\n      lastRegisterDeclare = declare;\r\n      systemRegister.apply(this, arguments);\r\n    };\r\n  }\r\n\r\n  const getRegister = systemPrototype.getRegister;\r\n  systemPrototype.getRegister = function () {\r\n    const register = getRegister.call(this);\r\n    // if its an actual System.register leave it\r\n    if (register && register[1] === lastRegisterDeclare)\r\n      return register;\r\n\r\n    // otherwise AMD takes priority\r\n    // no registration -> attempt AMD detection\r\n    if (!amdDefineDeps)\r\n      return register || emptyInstantiation;\r\n\r\n    const registration = createAMDRegister(amdDefineDeps, amdDefineExec);\r\n    amdDefineDeps = null;\r\n    return registration;\r\n  };\r\n  let amdDefineDeps, amdDefineExec;\r\n  global.define = function (name, deps, execute) {\r\n    // define('', [], function () {})\r\n    if (typeof name === 'string') {\r\n      if (amdDefineDeps) {\r\n        if (!System.registerRegistry)\r\n          throw new Error('Include the named register extension for SystemJS named AMD support.');\r\n        System.registerRegistry[name] = createAMDRegister(deps, execute);\r\n        amdDefineDeps = [];\r\n        amdDefineExec = emptyFn;\r\n        return;\r\n      }\r\n      else {\r\n        if (System.registerRegistry)\r\n          System.registerRegistry[name] = createAMDRegister([].concat(deps), execute);\r\n        name = deps;\r\n        deps = execute;\r\n      }\r\n    }\r\n    // define([], function () {})\r\n    if (name instanceof Array) {\r\n      amdDefineDeps = name;\r\n      amdDefineExec = deps;\r\n    }\r\n    // define({})\r\n    else if (typeof name === 'object') {\r\n      amdDefineDeps = [];\r\n      amdDefineExec = function () { return name };\r\n    }\r\n    // define(function () {})\r\n    else if (typeof name === 'function') {\r\n      amdDefineDeps = requireExportsModule;\r\n      amdDefineExec = name;\r\n    }\r\n  };\r\n  global.define.amd = {};\r\n})(typeof self !== 'undefined' ? self : global);","'use strict';\n\nvar PENDING = 'pending';\nvar SETTLED = 'settled';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function () {};\nvar isNode = typeof global !== 'undefined' && typeof global.process !== 'undefined' && typeof global.process.emit === 'function';\n\nvar asyncSetTimer = typeof setImmediate === 'undefined' ? setTimeout : setImmediate;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush() {\n\t// run promise callbacks\n\tfor (var i = 0; i < asyncQueue.length; i++) {\n\t\tasyncQueue[i][0](asyncQueue[i][1]);\n\t}\n\n\t// reset async asyncQueue\n\tasyncQueue = [];\n\tasyncTimer = false;\n}\n\nfunction asyncCall(callback, arg) {\n\tasyncQueue.push([callback, arg]);\n\n\tif (!asyncTimer) {\n\t\tasyncTimer = true;\n\t\tasyncSetTimer(asyncFlush, 0);\n\t}\n}\n\nfunction invokeResolver(resolver, promise) {\n\tfunction resolvePromise(value) {\n\t\tresolve(promise, value);\n\t}\n\n\tfunction rejectPromise(reason) {\n\t\treject(promise, reason);\n\t}\n\n\ttry {\n\t\tresolver(resolvePromise, rejectPromise);\n\t} catch (e) {\n\t\trejectPromise(e);\n\t}\n}\n\nfunction invokeCallback(subscriber) {\n\tvar owner = subscriber.owner;\n\tvar settled = owner._state;\n\tvar value = owner._data;\n\tvar callback = subscriber[settled];\n\tvar promise = subscriber.then;\n\n\tif (typeof callback === 'function') {\n\t\tsettled = FULFILLED;\n\t\ttry {\n\t\t\tvalue = callback(value);\n\t\t} catch (e) {\n\t\t\treject(promise, e);\n\t\t}\n\t}\n\n\tif (!handleThenable(promise, value)) {\n\t\tif (settled === FULFILLED) {\n\t\t\tresolve(promise, value);\n\t\t}\n\n\t\tif (settled === REJECTED) {\n\t\t\treject(promise, value);\n\t\t}\n\t}\n}\n\nfunction handleThenable(promise, value) {\n\tvar resolved;\n\n\ttry {\n\t\tif (promise === value) {\n\t\t\tthrow new TypeError('A promises callback cannot return that same promise.');\n\t\t}\n\n\t\tif (value && (typeof value === 'function' || typeof value === 'object')) {\n\t\t\t// then should be retrieved only once\n\t\t\tvar then = value.then;\n\n\t\t\tif (typeof then === 'function') {\n\t\t\t\tthen.call(value, function (val) {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolved = true;\n\n\t\t\t\t\t\tif (value === val) {\n\t\t\t\t\t\t\tfulfill(promise, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(promise, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, function (reason) {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolved = true;\n\n\t\t\t\t\t\treject(promise, reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tif (!resolved) {\n\t\t\treject(promise, e);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction resolve(promise, value) {\n\tif (promise === value || !handleThenable(promise, value)) {\n\t\tfulfill(promise, value);\n\t}\n}\n\nfunction fulfill(promise, value) {\n\tif (promise._state === PENDING) {\n\t\tpromise._state = SETTLED;\n\t\tpromise._data = value;\n\n\t\tasyncCall(publishFulfillment, promise);\n\t}\n}\n\nfunction reject(promise, reason) {\n\tif (promise._state === PENDING) {\n\t\tpromise._state = SETTLED;\n\t\tpromise._data = reason;\n\n\t\tasyncCall(publishRejection, promise);\n\t}\n}\n\nfunction publish(promise) {\n\tpromise._then = promise._then.forEach(invokeCallback);\n}\n\nfunction publishFulfillment(promise) {\n\tpromise._state = FULFILLED;\n\tpublish(promise);\n}\n\nfunction publishRejection(promise) {\n\tpromise._state = REJECTED;\n\tpublish(promise);\n\tif (!promise._handled && isNode) {\n\t\tglobal.process.emit('unhandledRejection', promise._data, promise);\n\t}\n}\n\nfunction notifyRejectionHandled(promise) {\n\tglobal.process.emit('rejectionHandled', promise);\n}\n\n/**\n * @class\n */\nfunction Promise(resolver) {\n\tif (typeof resolver !== 'function') {\n\t\tthrow new TypeError('Promise resolver ' + resolver + ' is not a function');\n\t}\n\n\tif (this instanceof Promise === false) {\n\t\tthrow new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\t}\n\n\tthis._then = [];\n\n\tinvokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n\tconstructor: Promise,\n\n\t_state: PENDING,\n\t_then: null,\n\t_data: undefined,\n\t_handled: false,\n\n\tthen: function (onFulfillment, onRejection) {\n\t\tvar subscriber = {\n\t\t\towner: this,\n\t\t\tthen: new this.constructor(NOOP),\n\t\t\tfulfilled: onFulfillment,\n\t\t\trejected: onRejection\n\t\t};\n\n\t\tif ((onRejection || onFulfillment) && !this._handled) {\n\t\t\tthis._handled = true;\n\t\t\tif (this._state === REJECTED && isNode) {\n\t\t\t\tasyncCall(notifyRejectionHandled, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this._state === FULFILLED || this._state === REJECTED) {\n\t\t\t// already resolved, call callback async\n\t\t\tasyncCall(invokeCallback, subscriber);\n\t\t} else {\n\t\t\t// subscribe\n\t\t\tthis._then.push(subscriber);\n\t\t}\n\n\t\treturn subscriber.then;\n\t},\n\n\tcatch: function (onRejection) {\n\t\treturn this.then(null, onRejection);\n\t}\n};\n\nPromise.all = function (promises) {\n\tif (!Array.isArray(promises)) {\n\t\tthrow new TypeError('You must pass an array to Promise.all().');\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar results = [];\n\t\tvar remaining = 0;\n\n\t\tfunction resolver(index) {\n\t\t\tremaining++;\n\t\t\treturn function (value) {\n\t\t\t\tresults[index] = value;\n\t\t\t\tif (!--remaining) {\n\t\t\t\t\tresolve(results);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfor (var i = 0, promise; i < promises.length; i++) {\n\t\t\tpromise = promises[i];\n\n\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\tpromise.then(resolver(i), reject);\n\t\t\t} else {\n\t\t\t\tresults[i] = promise;\n\t\t\t}\n\t\t}\n\n\t\tif (!remaining) {\n\t\t\tresolve(results);\n\t\t}\n\t});\n};\n\nPromise.race = function (promises) {\n\tif (!Array.isArray(promises)) {\n\t\tthrow new TypeError('You must pass an array to Promise.race().');\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tfor (var i = 0, promise; i < promises.length; i++) {\n\t\t\tpromise = promises[i];\n\n\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\tpromise.then(resolve, reject);\n\t\t\t} else {\n\t\t\t\tresolve(promise);\n\t\t\t}\n\t\t}\n\t});\n};\n\nPromise.resolve = function (value) {\n\tif (value && typeof value === 'object' && value.constructor === Promise) {\n\t\treturn value;\n\t}\n\n\treturn new Promise(function (resolve) {\n\t\tresolve(value);\n\t});\n};\n\nPromise.reject = function (reason) {\n\treturn new Promise(function (resolve, reject) {\n\t\treject(reason);\n\t});\n};\n\nmodule.exports = Promise;\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.UI = void 0;\r\nvar UI;\r\n(function (UI) {\r\n})(UI = exports.UI || (exports.UI = {}));\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.app = void 0;\r\nvar UI_1 = require(\"./UI\");\r\nvar app;\r\n(function (app) {\r\n    app.UI = UI_1.UI;\r\n    var LogLevel;\r\n    (function (LogLevel) {\r\n        LogLevel[LogLevel[\"None\"] = 0] = \"None\";\r\n        LogLevel[LogLevel[\"Exception\"] = 1] = \"Exception\";\r\n        LogLevel[LogLevel[\"Error\"] = 2] = \"Error\";\r\n        LogLevel[LogLevel[\"Warn\"] = 3] = \"Warn\";\r\n        LogLevel[LogLevel[\"Info\"] = 4] = \"Info\";\r\n        LogLevel[LogLevel[\"Trace\"] = 5] = \"Trace\";\r\n    })(LogLevel = app.LogLevel || (app.LogLevel = {}));\r\n    var ModuleSystem;\r\n    (function (ModuleSystem) {\r\n        ModuleSystem[\"None\"] = \"none\";\r\n        ModuleSystem[\"CommonJS\"] = \"commonjs\";\r\n        ModuleSystem[\"AMD\"] = \"amd\";\r\n        ModuleSystem[\"UMD\"] = \"umd\";\r\n        ModuleSystem[\"ES\"] = \"es\";\r\n        ModuleSystem[\"Raw\"] = \"raw\";\r\n    })(ModuleSystem = app.ModuleSystem || (app.ModuleSystem = {}));\r\n})(app = exports.app || (exports.app = {}));\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.webapp = void 0;\r\nvar webapp;\r\n(function (webapp) {\r\n    var browserType;\r\n    (function (browserType) {\r\n        browserType[browserType[\"Opera\"] = 0] = \"Opera\";\r\n        browserType[browserType[\"FireFox\"] = 1] = \"FireFox\";\r\n        browserType[browserType[\"Safari\"] = 2] = \"Safari\";\r\n        browserType[browserType[\"IE\"] = 3] = \"IE\";\r\n        browserType[browserType[\"Edge\"] = 4] = \"Edge\";\r\n        browserType[browserType[\"Chrome\"] = 5] = \"Chrome\";\r\n        browserType[browserType[\"Blink\"] = 6] = \"Blink\";\r\n        browserType[browserType[\"Unknown\"] = 7] = \"Unknown\";\r\n    })(browserType = webapp.browserType || (webapp.browserType = {}));\r\n})(webapp = exports.webapp || (exports.webapp = {}));\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.registry = void 0;\r\nvar registry;\r\n(function (registry) {\r\n    var itemType;\r\n    (function (itemType) {\r\n        itemType[itemType[\"Service\"] = 0] = \"Service\";\r\n        itemType[itemType[\"Component\"] = 1] = \"Component\";\r\n    })(itemType = registry.itemType || (registry.itemType = {}));\r\n    var licenseType;\r\n    (function (licenseType) {\r\n        licenseType[licenseType[\"MIT\"] = 0] = \"MIT\";\r\n        licenseType[licenseType[\"GNU\"] = 1] = \"GNU\";\r\n    })(licenseType = registry.licenseType || (registry.licenseType = {}));\r\n})(registry = exports.registry || (exports.registry = {}));\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.types = void 0;\r\nvar app_1 = require(\"./app\");\r\nvar webapp_1 = require(\"./webapp\");\r\nvar registry_1 = require(\"./registry\");\r\nvar types;\r\n(function (types) {\r\n    types.app = app_1.app;\r\n    types.registry = registry_1.registry;\r\n    types.webapp = webapp_1.webapp;\r\n})(types = exports.types || (exports.types = {}));\r\nexports[\"default\"] = types;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexports.__esModule = true;\r\nexports.BaseComponent = void 0;\r\nvar seed = '0123456789abcdefgihjlmnopqrstuvwxyzABCDEFGIHJKLMNOPQRSTUVWXYZ';\r\nvar BaseComponent = function inject(app) {\r\n    function generateId() {\r\n        var n = 8;\r\n        var id = '';\r\n        while (0 < n--) {\r\n            id += seed[Math.random() * 61 | 0];\r\n        }\r\n        return id;\r\n    }\r\n    return /** @class */ (function (_super) {\r\n        __extends(BaseComponent, _super); /*implements types.Component<P,S>*/\r\n        //state:S\r\n        function BaseComponent(props, context) {\r\n            var _this = _super.call(this, props, context) || this;\r\n            if (!props)\r\n                throw new Error(\"Expected properties object from parent constructor.  Please ensure that you are passing props to super() call\");\r\n            _this.key = props[\"_key\"] || ('bc_' + generateId());\r\n            _this.props = props;\r\n            return _this;\r\n        }\r\n        BaseComponent.prototype.renderInternal = function (e, index) {\r\n            var _this = this;\r\n            if (Array.isArray(e)) {\r\n                if (typeof e[0] === \"object\" && e[0][\"default\"] && (typeof e[0][\"default\"] === \"string\" || typeof e[0][\"default\"] === \"function\" || Promise.resolve(e[0][\"default\"]) === e[0][\"default\"]))\r\n                    return app.services.processor.processElement(e, this.key, index);\r\n                else if (typeof e[0] === \"string\" || typeof e[0] === \"function\" || Promise.resolve(e[0]) === e[0])\r\n                    return app.services.processor.processElement(e, this.key, index);\r\n                else {\r\n                    return e.map(function (c, idx) { if (Array.isArray(c)) {\r\n                        if (!c[1])\r\n                            c[1] = {};\r\n                        c[1][\"key\"] = c[1][\"key\"] || idx;\r\n                    } return _this.renderInternal(c, idx); });\r\n                }\r\n            }\r\n            return !e || typeof e === \"string\" ? e : app.services.processor.processElement(e, this.key, index);\r\n        };\r\n        BaseComponent.prototype.render = function (props /*, state?: Readonly<S>, context?: any*/) {\r\n            return this.renderInternal(props || this.props.children);\r\n        };\r\n        return BaseComponent;\r\n    }(app.services.UI.Component));\r\n};\r\nexports.BaseComponent = BaseComponent;\r\n{ }\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexports.__esModule = true;\r\nexports.Async = void 0;\r\nvar Async = function inject(app) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(Async, _super);\r\n        function Async(props, context) {\r\n            var _this = _super.call(this, props, context) || this;\r\n            _this.state = {};\r\n            //(Array.isArray(this.props.children) ? Promise.all : Promise.resolve)(this.props.children).then(o => this.setState({value: o  }));\r\n            if (Array.isArray(props.children))\r\n                Promise.all(props.children).then(function (o) { return _this.setState({ value: o }); });\r\n            else //if (Promise.resolve(this.props.children) === this.props.children)\r\n                Promise.resolve(props.children).then(function (o) { return _this.setState({ value: o }); });\r\n            return _this;\r\n        }\r\n        Async.prototype.render = function () {\r\n            return !!this.state.value ? _super.prototype.render.call(this, this.state.value) : null;\r\n        };\r\n        return Async;\r\n    }(app.services.UI.Component));\r\n};\r\nexports.Async = Async;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.Async = exports.BaseComponent = void 0;\r\nvar BaseComponent_1 = require(\"./BaseComponent\");\r\nexports.BaseComponent = BaseComponent_1.BaseComponent;\r\nvar Async_1 = require(\"./Async\");\r\nexports.Async = Async_1.Async;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexports.__esModule = true;\r\nexports.Data = void 0;\r\nvar components_1 = require(\"../components\");\r\nfunction clone(o) {\r\n    if (Array.isArray(o))\r\n        return o.map(function (o) { return clone(o); });\r\n    else if (typeof o === \"object\") {\r\n        var z = Object.create(o);\r\n        Object.keys(o).forEach(function (k) { return z[k] = o[k]; });\r\n        return z;\r\n    }\r\n    else\r\n        return o;\r\n}\r\nvar SM = function inject(app) {\r\n    return /** @class */ (function (_super) {\r\n        __extends(Bind, _super);\r\n        function Bind(props, context) {\r\n            var _this = _super.call(this, props, context) || this;\r\n            var s = {};\r\n            _this.state = { loaded: typeof props.data !== \"string\", data: clone(props.data), subscribers: s };\r\n            if (typeof props.data === \"string\")\r\n                app.services.moduleSystem[\"import\"](props.data).then(function (x) { return _this.setState({ data: clone(x) }, function () { _this.visit.call(_this, props.childArray, s); _this.setState({ loaded: true }); }); });\r\n            else\r\n                _this.visit.call(_this, props.childArray, s);\r\n            _this.render = _this.render.bind(_this);\r\n            return _this;\r\n        }\r\n        Bind.prototype.setValue = function (path, value) {\r\n            this.state.subscribers[path].forEach(function (s) { if (s.value != value)\r\n                s.value = value; });\r\n            this.setState({ data: (new Function('data', 'path', 'value', 'data' + (path[0] === '[' ? '' : '.') + path + ' = value; return data;'))(this.state.data, path, value) });\r\n        };\r\n        Bind.prototype.getValue = function (path) {\r\n            return (new Function('data', 'path', 'return data' + (path[0] === '[' ? '' : '.') + path))(this.state.data, path);\r\n        };\r\n        Bind.prototype.subscribe = function (a, s) {\r\n            var _this = this;\r\n            var path = a[\"bind\"];\r\n            a.onChange = function (v) { return _this.setValue.call(_this, path, v.target.value); };\r\n            a.value = this.getValue.call(this, path);\r\n            if (s[path] === undefined)\r\n                s[path] = [];\r\n            s[path].push(a);\r\n        };\r\n        Bind.prototype.visit = function (obj, s) {\r\n            var _this = this;\r\n            if (Array.isArray(obj)) {\r\n                obj.forEach(function (e) {\r\n                    if (Array.isArray(e) && e[0] != \"Data.bind\") {\r\n                        if (e[1] && typeof e[1] === \"object\" && e[1][\"bind\"])\r\n                            _this.subscribe(e[1], s);\r\n                        if (e[2] && Array.isArray(e[2]))\r\n                            _this.visit(e[2], s);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        //render(e:types.app.promisedElement) {\r\n        Bind.prototype.render = function (props /*, state?: Readonly<S>, context?: any*/) {\r\n            return this.state.loaded ? _super.prototype.render.call(this, !!props ? props : this.props.childArray) : null;\r\n        };\r\n        return Bind;\r\n    }(components_1.BaseComponent(app)));\r\n};\r\nvar Data = {\r\n    bind: function transform(a, c) {\r\n        return [SM, { data: a, childArray: c }];\r\n        //return [\"div\", a, c];\r\n    },\r\n    format: function transform(str) {\r\n        var s = str.toString() || \"\";\r\n        return s;\r\n    }\r\n};\r\nexports.Data = Data;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.Events = void 0;\r\nvar Events = /** @class */ (function () {\r\n    function Events(_a) {\r\n        this.callbacks = {};\r\n        if (typeof window === \"object\")\r\n            window.addEventListener(\"message\", this.onWindowMessage.bind(this));\r\n    }\r\n    Events.prototype.onWindowMessage = function (ev) {\r\n        if (typeof ev.data === \"object\" && typeof ev.data.type === \"string\")\r\n            this.publish(ev.data);\r\n    };\r\n    Events.prototype.subscribe = function (eventType, callback) {\r\n        //console.log(callback);\r\n        if (!this.callbacks[eventType.type])\r\n            this.callbacks[eventType.type] = [];\r\n        this.callbacks[eventType.type].push({ type: eventType, correlationId: eventType.correlationId, callback: callback });\r\n    };\r\n    Events.prototype.unsubscribe = function (eventType, callback) {\r\n        //console.log(callback);\r\n        var callbacks;\r\n        if (callbacks = this.callbacks[eventType.type]) {\r\n            for (var i = callbacks.length - 1; i >= 0; i--)\r\n                if (callbacks[i].callback === callback)\r\n                    callbacks.splice(i, 1);\r\n        }\r\n    };\r\n    Events.prototype.publish = function (event, target) {\r\n        var subscriptions = this.callbacks[event.type];\r\n        var response = [];\r\n        if (target)\r\n            target.postMessage(event, location.href);\r\n        else\r\n            for (var s in subscriptions)\r\n                if (subscriptions[s].correlationId === undefined || subscriptions[s].correlationId == event.correlationId) \r\n                /*if (subscriptions[s].callback)*/ {\r\n                    var r = subscriptions[s].callback(event);\r\n                    if (!!r)\r\n                        response.push(r);\r\n                }\r\n        ;\r\n        return response;\r\n    };\r\n    return Events;\r\n}());\r\nexports.Events = Events;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nexports.__esModule = true;\r\nvar basePath = '';\r\nfunction nodeRequire(url) {\r\n    return new Function('url', 'tmpdir', 'tmpdir = tmpdir ? tmpdir : global.process.env.INIT_CWD; var __dirname__ = global.process.cwd(); if (__dirname__ != tmpdir) global.process.chdir(tmpdir); var _exp = (global.require || global.process.mainModule.constructor._load)(url); if (global.process.cwd() != __dirname__) global.process.chdir(__dirname__); return _exp;')(url, basePath);\r\n}\r\nfunction run(source, url /*, basePath?:string*/) {\r\n    var m = { exports: {} };\r\n    try {\r\n        new Function('require', 'module', source + \";\\n//# sourceURL=' + \" + url)(nodeRequire, m);\r\n    }\r\n    catch (f) {\r\n        console.log('Error running script from from source' + url || source);\r\n        throw f;\r\n    }\r\n    return m.exports;\r\n}\r\nvar Loader = {\r\n    instantiate: function (url, parent) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var res;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, fetch(url, { credentials: 'same-origin' })];\r\n                case 1:\r\n                    res = _a.sent();\r\n                    if (!res.ok)\r\n                        throw new Error('Fetch error: ' + res.status + ' ' + res.statusText + (parent ? ' loading from  ' + parent : ''));\r\n                    return [2 /*return*/, res.text()];\r\n            }\r\n        });\r\n    }); },\r\n    \"import\": function (source, url) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var output;\r\n        return __generator(this, function (_a) {\r\n            try {\r\n                output = run(source, url /*, basePath*/);\r\n                return [2 /*return*/, output];\r\n            }\r\n            catch (e) {\r\n                console.log('Error executing script ' + url + ': ');\r\n                throw (e);\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    }); },\r\n    resolve: function (name) {\r\n        return name;\r\n    },\r\n    init: function ( /*basePath: string*/) { return void {}; },\r\n    fetch: function (url, headers) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var res, _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, fetch(url, { headers: headers, credentials: 'same-origin' })];\r\n                case 1:\r\n                    res = _b.sent();\r\n                    _a = {};\r\n                    return [4 /*yield*/, res.text()];\r\n                case 2: return [2 /*return*/, (_a.text = _b.sent(), _a.contentType = (res.headers.get('content-type') || 'text/plain').split(';')[0].toLowerCase(), _a)];\r\n            }\r\n        });\r\n    }); },\r\n    register: function (_source, _target) {\r\n    }\r\n};\r\nexports[\"default\"] = Loader;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nexports.__esModule = true;\r\nexports.Loader = void 0;\r\n//import path from 'path';\r\nvar basepath;\r\nfunction nodeRequire(url) {\r\n    var tmpdir = basepath || global.process.env.INIT_CWD;\r\n    var __dirname__ = global.process.cwd();\r\n    if (tmpdir && __dirname__ != tmpdir)\r\n        global.process.chdir(tmpdir);\r\n    var _exp = (global.require || (global.process.mainModule ? global.process.mainModule.constructor._load : url))(url);\r\n    if (global.process.cwd() != __dirname__)\r\n        global.process.chdir(__dirname__);\r\n    return _exp;\r\n    //return new Function('url', 'tmpdir', 'tmpdir = tmpdir ? tmpdir : global.process.env.INIT_CWD; var __dirname__ = global.process.cwd(); if (__dirname__ != tmpdir) global.process.chdir(tmpdir); var _exp = (global.require || global.process.mainModule.constructor._load)(url); if (global.process.cwd() != __dirname__) global.process.chdir(__dirname__); return _exp;')(url, basepath||'');\r\n}\r\nfunction run(source, url, references) {\r\n    var m = { exports: {} };\r\n    try {\r\n        if (url)\r\n            basepath = url; //path.resolve(url);\r\n        var refkeys = references ? Object.keys(references) : [];\r\n        var refs = references ? Object.values(references) : [];\r\n        Function.apply(void 0, __spreadArrays(refkeys, ['require', 'module', source + \";\\n//# sourceURL=' + \" + url])).apply(void 0, __spreadArrays(refs, [nodeRequire, m]));\r\n    }\r\n    catch (f) {\r\n        console.log('Error running script from source \"' + (url || source) + '\"', f);\r\n        throw f;\r\n    }\r\n    return m.exports;\r\n}\r\nvar Loader = {\r\n    instantiate: function (url, parent, _references) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var res;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, fetch(url, { credentials: 'same-origin' })];\r\n                case 1:\r\n                    res = _a.sent();\r\n                    if (!res.ok)\r\n                        throw new Error('Fetch error: ' + res.status + ' ' + res.statusText + (parent ? ' loading from  ' + parent : ''));\r\n                    return [2 /*return*/, res.text()];\r\n            }\r\n        });\r\n    }); },\r\n    \"import\": function (source, url, references) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var output;\r\n        return __generator(this, function (_a) {\r\n            try {\r\n                output = run(source, url, references);\r\n                return [2 /*return*/, output];\r\n            }\r\n            catch (e) {\r\n                console.log('Error executing script \"' + url + '\": ' + e + '\\n \"' + source + '\"');\r\n                throw (e);\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    }); },\r\n    resolve: function (name) {\r\n        return name;\r\n    },\r\n    init: function (basePath) {\r\n        basepath = basePath;\r\n    },\r\n    fetch: function (url, headers) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var res, _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, fetch(url, { headers: headers, credentials: 'same-origin' })];\r\n                case 1:\r\n                    res = _b.sent();\r\n                    _a = {};\r\n                    return [4 /*yield*/, res.text()];\r\n                case 2: return [2 /*return*/, (_a.text = _b.sent(), _a.contentType = (res.headers.get('content-type') || 'text/plain').split(';')[0].toLowerCase(), _a)];\r\n            }\r\n        });\r\n    }); },\r\n    register: function (_source, _target) {\r\n    }\r\n};\r\nexports.Loader = Loader;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.Loader = void 0;\r\nvar Loader = /** @class */ (function () {\r\n    function Loader(app) {\r\n        var _this = this;\r\n        this.app = app;\r\n        if (typeof window === \"object\") {\r\n            var systemjs = Object.getOwnPropertyDescriptor(window, \"System\");\r\n            if (systemjs) {\r\n                systemjs.value.constructor.prototype.jst = function (input, name) { return _this.app.services.transformer.transform(input, name); };\r\n                this.proxy = { \"import\": systemjs.value[\"import\"].bind(systemjs.value), register: systemjs.value.register.bind(systemjs.value), resolve: function (name) { return name; }, instantiate: systemjs.value.instantiate.bind(systemjs.value), init: function ( /*basePath: string*/) { return void {}; }, fetch: this.fetch };\r\n                systemjs.value.constructor.prototype.instantiate = this.instantiate.bind(this);\r\n                systemjs.value.constructor.prototype[\"import\"] = this[\"import\"].bind(this);\r\n            }\r\n            else\r\n                this.proxy = require('./loaders/Browser')[\"Loader\"];\r\n        }\r\n        if (this['proxy'] == null)\r\n            this.proxy = require('./loaders/NodeJs')[\"Loader\"];\r\n    }\r\n    Loader.prototype[\"import\"] = function (moduleName, normalizedParentName, _references) {\r\n        var _this = this;\r\n        var u = moduleName.indexOf('#') > -1 ? moduleName.slice(0, moduleName.indexOf('#')) : moduleName;\r\n        var b = u.length + 1 < moduleName.length ? moduleName.slice(u.length + 1).split('#') : [];\r\n        return new Promise(function (r, rj) { return _this.proxy[\"import\"](u /*this.resolve(u)*/, normalizedParentName).then(function (x) {\r\n            if (x[\"default\"])\r\n                x = x[\"default\"];\r\n            for (var i = 0; i < b.length; i++)\r\n                if ((x = x[b[i]]) === undefined) {\r\n                    //debugger;\r\n                    rj(\"Could not resolve property \" + b[i] + \" on \" + moduleName);\r\n                }\r\n            ;\r\n            r({ \"default\": x, __esModule: moduleName });\r\n        }, rj); });\r\n    };\r\n    Loader.prototype.resolve = function (url) {\r\n        if (url[0] == '@' && this.app.settings.cdn) {\r\n            var cdn = url.slice(0, url.indexOf('/'));\r\n            if (this.app.settings.cdn[cdn])\r\n                url = this.app.settings.cdn[cdn] + url.substr(cdn.length);\r\n        }\r\n        return this.proxy.resolve(url);\r\n    };\r\n    Loader.prototype.register = function (source, target) {\r\n        this.proxy.register(source, target);\r\n    };\r\n    Loader.prototype.instantiate = function (url, parent, references) {\r\n        return this.proxy.instantiate(this.resolve(url), parent, references);\r\n    };\r\n    Loader.prototype.init = function (basePath) {\r\n        Object.defineProperty(this.proxy[\"import\"], \"jst\", this.app.services.transformer.transform);\r\n        this.proxy.init(basePath);\r\n    };\r\n    Loader.prototype.fetch = function (url, headers) {\r\n        return new Promise((function (resolve, reject) {\r\n            var rq = new XMLHttpRequest();\r\n            rq.open('GET', url);\r\n            //rq.credentials = 'same-origin';\r\n            if (headers)\r\n                Object.keys(headers).forEach(function (h) { return rq.setRequestHeader(h, headers[h]); });\r\n            rq.onload = function () { if (rq.status == 200)\r\n                resolve({ text: rq.responseText, contentType: (rq.getResponseHeader('content-type') || 'text/plain').split(';')[0].toLowerCase() });\r\n            else\r\n                reject(rq.status + ':' + rq.statusText); };\r\n            rq.onerror = function () { reject(rq.status + ': ' + rq.statusText); };\r\n            rq.send();\r\n        }));\r\n    };\r\n    return Loader;\r\n}());\r\nexports.Loader = Loader;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.Parsers = void 0;\r\nexports.Parsers = {\r\n    \".\": function (obj, _transformer, _tc, _context) { return { format: \"json\", output: obj[\".\"] }; },\r\n    \".import\": function (obj, transformer, tc, context) { return { format: \"json\", output: transformer.loadModule(tc, transformer.process(obj[\".import\"], tc, { esc: false, et: false, depth: context.depth, format: \"json\" }).output, context.depth) }; },\r\n    \".function\": function (obj, transformer, tc, context) { return { format: \"json\", output: \"function \" + (obj[\".function\"] ? obj[\".function\"] : \"\") + \"(\" + (obj[\"arguments\"] ? transformer.process(obj[\"arguments\"], tc, { esc: false, et: true, depth: context.depth, format: \"json\" }).output : \"\") + \"){ return \" + transformer.process(obj[\"return\"], tc, { esc: true, et: false, depth: context.depth, format: \"json\" }).output + \" }\" }; },\r\n    \".map\": function (obj, transformer, tc, context) { return { format: \"json\", output: transformer.process(obj[\".map\"], tc, { esc: false, et: false, depth: context.depth, format: \"json\" }).output + \".map(function(\" + obj[\"arguments\"] + \") {return \" + (transformer.settings && transformer.settings.indent ? new Array(context.depth).join(' ') : \"\") + transformer.process(obj[\"return\"], tc, { esc: true, et: false, depth: context.depth, format: \"json\" }).output + \" })\" }; },\r\n    \".filter\": function (obj, transformer, tc, context) { return { format: \"json\", output: transformer.process(obj[\".filter\"], tc, { esc: false, et: false, depth: context.depth, format: \"json\" }).output + \".filter(function(\" + obj[\"arguments\"] + \") {return \" + transformer.process(obj[\"condition\"], tc, { esc: true, et: false, depth: context.depth, format: \"json\" }).output + \" })\" }; },\r\n    \".call\": function (obj, transformer, tc, context) { return { format: \"json\", output: transformer.process(obj[\".call\"], tc, { esc: false, et: false, depth: context.depth, format: \"json\" }).output + \".call(\" + (obj[\"arguments\"] ? transformer.process(obj[\"arguments\"], tc, { esc: false, et: true, depth: context.depth, format: \"json\" }).output : \"\") + \")\" }; },\r\n    \".exec\": function (obj, transformer, tc, context) { return { format: \"json\", output: transformer.process(obj[\".exec\"], tc, { esc: false, et: false, depth: context.depth, format: \"json\" }).output + \"(\" + (obj[\"arguments\"] ? transformer.process(obj[\"arguments\"], tc, { esc: true, et: true, depth: context.depth, format: \"json\" }).output : \"\") + \")\" }; },\r\n    \".new\": function (obj, transformer, tc, context) { return { format: \"json\", output: \"new \" + transformer.process(obj[\".new\"], tc, { esc: false, et: false, depth: context.depth, format: \"json\" }).output + \"(\" + (obj[\"arguments\"] ? transformer.process(obj[\"arguments\"], tc, { esc: true, et: true, depth: context.depth, format: \"json\" }).output : \"\") + \")\" }; }\r\n};\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexports.__esModule = true;\r\nexports.Processor = void 0;\r\n//import { App } from \"../app\";\r\nvar components_1 = require(\"../components\");\r\nvar types_1 = require(\"@appfibre/types\");\r\nfunction s_xa(a, b) { return Object.prototype.hasOwnProperty.call(a, b); }\r\nfunction clone(a /*,b?:any*/) { for (var c = 1; c < arguments.length; c++) {\r\n    var d = arguments[c];\r\n    if (d)\r\n        for (var e in d)\r\n            s_xa(d, e) && (a[e] = d[e]);\r\n} return a; }\r\nfunction Inject(app, proxy) {\r\n    var inj = clone(app);\r\n    inj.services.UI.Component = proxy || components_1.BaseComponent(app) /*app.services.UI.Component*/;\r\n    /*let { title, designer, ui, target, ...inject } = app;\r\n    return { Component\r\n        , Context\r\n        , Loader\r\n        , components : app.components\r\n        , ...inject\r\n    };*/\r\n    return inj;\r\n}\r\nvar Processor = /** @class */ (function () {\r\n    function Processor(app) {\r\n        this.cache = Object();\r\n        this.chars = \"abcdefghijkmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\r\n        this.type = \"Processor\";\r\n        this.app = app;\r\n        this.cache[\".App\"] = function inject(app) {\r\n            return /** @class */ (function (_super) {\r\n                __extends(Proxy, _super);\r\n                //app:App;\r\n                function Proxy(props, context) {\r\n                    return _super.call(this, props, context) || this;\r\n                    //this.app = new App(props);\r\n                }\r\n                Proxy.prototype.render = function () {\r\n                    return _super.prototype.render.call(this, this.props.main);\r\n                };\r\n                return Proxy;\r\n            }(components_1.BaseComponent(app)));\r\n        };\r\n    }\r\n    Processor.prototype.Async = function () {\r\n        this.async = this.async || components_1.Async(this.app);\r\n        return this.async;\r\n    };\r\n    Processor.prototype.createClass = function (B, d) {\r\n        return /** @class */ (function (_super) {\r\n            __extends(class_1, _super);\r\n            function class_1() {\r\n                var _this = this;\r\n                var b = _this = _super.call(this, arguments) || this;\r\n                var i = typeof d === \"function\" ? d.call(b, b) : d;\r\n                if (b !== undefined)\r\n                    for (var p in b.__proto__)\r\n                        if (!i[p])\r\n                            i[p] = b[p];\r\n                if (i[\"constructor\"])\r\n                    i.constructor.apply(i, arguments);\r\n                return i;\r\n            }\r\n            return class_1;\r\n        }(B));\r\n    };\r\n    Processor.prototype.locate = function (resource, path) {\r\n        var parts = path.split('.');\r\n        var obj = resource;\r\n        for (var part = 0; part < parts.length; part++)\r\n            if (obj[parts[part]] !== undefined)\r\n                obj = obj[path[part]];\r\n            else\r\n                obj = null;\r\n        return obj;\r\n    };\r\n    Processor.prototype.getFunctionName = function (obj) {\r\n        if (obj.name)\r\n            return obj.name;\r\n        var name = obj.toString();\r\n        if (name.indexOf('(') > -1)\r\n            name = name.substr(0, name.indexOf('('));\r\n        if (name.indexOf('function') > -1)\r\n            name = name.substr(name.indexOf('function') + 'function'.length);\r\n        return name.trim();\r\n    };\r\n    // ether an element, or array of elements depending on depth == even or odd\r\n    Processor.prototype.processElementInternal = function (element, parentkey, depth, index) {\r\n        if (depth % 2 === 0) {\r\n            if (typeof element != \"string\" && !Array.isArray(element)) {\r\n                this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Error, \"Child element [2] should be either a string or array\", [{ element: element }]);\r\n                return element;\r\n            }\r\n            else if (Array.isArray(element)) {\r\n                if (typeof element[1] !== \"string\") {\r\n                    element[1] = element[1] || {};\r\n                    if (!element[1].key)\r\n                        element[1].key = parentkey + this.generateKey(index);\r\n                    if (typeof element[0] === \"function\")\r\n                        element[1][\"_key\"] = element[1][\"key\"];\r\n                }\r\n            }\r\n            //if (Array.isArray(element) && element[1] && element[1].context && typeof element[1].context.intercept === \"function\")\r\n            //    element = element[1].context.intercept(element);\r\n        }\r\n        //console.log({element, index, depth, code: JSON.stringify(element)});\r\n        return depth % 2 === 1 || !Array.isArray(element) ? element : this.app.services.UI.createElement(element[0], element[1], element[2] /*&& typeof element[2] === \"object\" && !Array.isArray(element[2]) && (<{default:any}>element[2]).default ? this.init(element[2], true) : element[2]*/);\r\n    };\r\n    Processor.prototype.parse = function (obj, parentkey, level, index) {\r\n        this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Trace, 'Processor.parse', obj);\r\n        var processor = this;\r\n        return new Promise(function (r, f) {\r\n            if (!obj)\r\n                return r(obj);\r\n            obj = processor.unwrapDefault(obj);\r\n            //if (typeof obj === \"object\" && !Array.isArray(obj) && (<{default:any/*types.app.element|types.app.promisedElement*/}>obj).default)        \r\n            //   obj = processor.init(obj, false);\r\n            if (Array.isArray(obj)) {\r\n                //if (typeof obj[0] === \"object\" && obj[0]['default'])\r\n                //  obj[0] = processor.init(obj[0], false);\r\n                if (typeof obj[0] === \"string\")\r\n                    obj[0] = processor.resolve(obj[0]);\r\n                if (typeof obj[0] === \"function\" && processor.getFunctionName(obj[0]) === \"transform\")\r\n                    processor.parse(obj[0].apply(processor.app, obj.slice(1)), parentkey /*+ ','*/, level, index).then(r, f);\r\n                else\r\n                    Promise.all(obj.map(function (v, i) { return processor.parse(v, parentkey /*+ '.' */ + processor.generateKey(i), level + 1, i); })).then(function (o) { try {\r\n                        r(processor.processElementInternal(o, parentkey, level, index));\r\n                    }\r\n                    catch (e) {\r\n                        processor.app.services.logger.log(types_1.types.app.LogLevel.Error, 'Processor.parse: ' + e.stack, [o]);\r\n                        f(e);\r\n                    } }, f);\r\n            }\r\n            else if (typeof obj === \"function\" && processor.getFunctionName(obj) === \"inject\")\r\n                Promise.resolve((obj)(Inject(processor.app))).then(function (o) { return processor.parse(o, parentkey, level, index).then(r, f); }, f);\r\n            else if (typeof obj === \"function\" && processor.getFunctionName(obj) === \"Component\")\r\n                try {\r\n                    r(processor.createClass(components_1.BaseComponent(processor.app), obj));\r\n                }\r\n                catch (e) {\r\n                    processor.app.services.logger.log(types_1.types.app.LogLevel.Error, 'Processor.parse: ' + e.stack, obj);\r\n                    f(e);\r\n                }\r\n            else if (Promise.resolve(obj) === obj) {\r\n                Promise.resolve(obj).then(function (o) { return processor.parse(o, parentkey, level, index).then(function (o2) { return r(o2); }, f); }, f);\r\n            }\r\n            else if (obj) {\r\n                try {\r\n                    r(processor.processElementInternal(obj, parentkey, level, index));\r\n                }\r\n                catch (e) {\r\n                    processor.app.services.logger.log(types_1.types.app.LogLevel.Error, 'Processor.parse: ' + e.stack, obj);\r\n                    f(e);\r\n                }\r\n            }\r\n            else\r\n                r(obj);\r\n        });\r\n    };\r\n    Processor.prototype.resolve = function (fullpath) {\r\n        var _this = this;\r\n        this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Trace, 'Processor.resolve', [fullpath]);\r\n        if (this.cache[fullpath])\r\n            return this.cache[fullpath];\r\n        if (fullpath.substring(0, 1) == \"~\") {\r\n            var parts = fullpath.substring(1, fullpath.length).split('#');\r\n            var obj = this.app.services.moduleSystem.instantiate(parts[0], this);\r\n            if (parts.length == 1)\r\n                return obj;\r\n            return obj.then(function (x) { return _this.locate(x, parts.slice(1, parts.length).join(\".\")); });\r\n        }\r\n        else {\r\n            var path = fullpath ? fullpath.split('.') : [''];\r\n            var obj_1 = this.app.components || Object;\r\n            for (var part = 0; part < path.length; part++) {\r\n                if (typeof obj_1 === \"function\" && this.getFunctionName(obj_1) === \"inject\")\r\n                    obj_1 = obj_1(Inject(this.app, components_1.BaseComponent(this.app)));\r\n                if (obj_1[path[part]] !== undefined) {\r\n                    obj_1 = obj_1[path[part]];\r\n                    if (typeof obj_1 === \"function\" && this.getFunctionName(obj_1) == \"inject\")\r\n                        obj_1 = obj_1(Inject(this.app, components_1.BaseComponent(this.app)));\r\n                }\r\n                else if (obj_1[\"default\"] && obj_1[\"default\"][path[part]] !== undefined) {\r\n                    //debugger;\r\n                    obj_1 = obj_1[\"default\"][path[part]];\r\n                    if (typeof obj_1 === \"function\" && this.getFunctionName(obj_1) == \"inject\")\r\n                        obj_1 = obj_1(Inject(this.app, components_1.BaseComponent(this.app)));\r\n                }\r\n                else if (path.length == 1 && path[0].length > 0 && path[0].toLowerCase() == path[0])\r\n                    obj_1 = path[part];\r\n                else {\r\n                    if (fullpath === \"Exception\")\r\n                        return function transform(obj) { return [\"pre\", { \"style\": { \"color\": \"red\" } }, obj[1].stack ? obj[1].stack : obj[1]]; };\r\n                    else {\r\n                        debugger;\r\n                        this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Error, 'Unable to resolve \"App.components.' + (fullpath || 'undefined') + \"'\");\r\n                        return /** @class */ (function (_super) {\r\n                            __extends(class_2, _super);\r\n                            function class_2() {\r\n                                return _super !== null && _super.apply(this, arguments) || this;\r\n                            }\r\n                            class_2.prototype.render = function () { return /*super.render ?*/ _super.prototype.render.call(this, [\"span\", { \"style\": { \"color\": \"red\" } }, (fullpath || 'undefined') + \" not found!\"]); /*: `${fullpath||'undefined'} not found!`*/ };\r\n                            return class_2;\r\n                        }(components_1.BaseComponent(this.app)));\r\n                    }\r\n                }\r\n            }\r\n            //return this.cache[fullpath] = Array.isArray(obj) ? class Wrapper extends this.app.services.UI.Component { shouldComponentUpdate() { return true; } render() {if (!obj[1]) obj[1] = {}; if   (!obj[1].key) obj[1].key = 0; return this.parse(jst && !this.app.disableIntercept && window.parent !== null && window !== window.parent ? [Intercept, {\"file\": jst, \"method\": prop}, [obj]] : obj); }} : obj;\r\n            return this.cache[fullpath] = obj_1;\r\n        }\r\n    };\r\n    Processor.prototype.unwrapDefault = function (obj) {\r\n        if (obj && obj[\"default\"])\r\n            obj = obj[\"default\"];\r\n        if (Array.isArray(obj))\r\n            return obj.map(function (e) { return e && e[\"default\"] ? e[\"default\"] : e; });\r\n        return obj;\r\n    };\r\n    Processor.prototype.generateKey = function (index) {\r\n        if (!index)\r\n            return '_';\r\n        var key = '';\r\n        if (index >= this.chars.length) {\r\n            while (index >= this.chars.length) {\r\n                key = this.chars[(index % this.chars.length)].toString() + key;\r\n                index = (index - (index % this.chars.length)) / this.chars.length;\r\n            }\r\n            key = '_' + key;\r\n        }\r\n        else\r\n            key = (index % this.chars.length).toString();\r\n        return key;\r\n    };\r\n    Processor.prototype.processElement = function (obj, parentkey, index) {\r\n        var _this = this;\r\n        if (!obj)\r\n            return obj;\r\n        obj = this.unwrapDefault(obj);\r\n        if (Array.isArray(obj)) {\r\n            if (typeof obj[0] === \"string\") {\r\n                obj[0] = this.resolve(obj[0]);\r\n            }\r\n            if (typeof obj[0] === \"function\") {\r\n                var name = this.getFunctionName(obj[0]);\r\n                switch (name) {\r\n                    case \"transform\":\r\n                        var key = index;\r\n                        if (obj[1] && obj[1].key)\r\n                            key = obj[1].key;\r\n                        return this.processElement(obj[0].apply(this.app, obj.slice(1)), parentkey /*+','*/, key);\r\n                    case \"inject\":\r\n                        obj[0] = (obj[0])(Inject(this.app));\r\n                        return this.processElement(obj, parentkey /*+ ','*/);\r\n                    case \"Component\":\r\n                        obj[0] = this.createClass(components_1.BaseComponent(this.app), obj[0]);\r\n                        return this.processElement(obj, parentkey /*+ ','*/);\r\n                }\r\n            }\r\n        }\r\n        if (Array.isArray(obj) && obj.some(function (c) { return Promise.resolve(c) === c; }))\r\n            return this.processElementInternal([this.Async(), { id: Date.now() }, obj], parentkey + '_async', 0, obj && obj[1] && obj[1].key !== undefined ? obj[1].key : index);\r\n        else if (typeof obj === \"string\" || !obj)\r\n            return obj;\r\n        //else if (obj.then)  \r\n        //    Promise.all( [ obj ]).then(o => processor.parse(o[0], level, path, index).then((o2:any) => r(o2), f), f);\r\n        if (Promise.resolve(obj) === obj)\r\n            obj = [this.Async(), { key: parentkey }, obj];\r\n        if (Array.isArray(obj)) {\r\n            return this.processElementInternal([obj[0], obj[1], Array.isArray(obj[2]) ? obj[2].map(function (c, idx) { return typeof c === \"string\" ? c : _this.processElement(c, parentkey + /*'.' +*/ _this.generateKey(idx), idx); }) : obj[2]], parentkey + this.generateKey(index), 0, index);\r\n        }\r\n        else\r\n            return obj;\r\n    };\r\n    Processor.prototype.process = function (obj) {\r\n        var _this = this;\r\n        this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Trace, 'Processor.process', obj);\r\n        function visit(obj) {\r\n            if (Array.isArray(obj)) {\r\n                for (var i in obj)\r\n                    if (visit(obj[i]))\r\n                        return true;\r\n            }\r\n            else if (typeof obj === \"object\" && obj != null) {\r\n                var keys = Object.keys(obj);\r\n                for (var i in keys)\r\n                    if (keys[i].substr(0, 1) == \".\")\r\n                        return true;\r\n                    else if (visit(obj[keys[i]]))\r\n                        return true;\r\n            }\r\n            return false;\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            var isTemplate = visit(obj);\r\n            try {\r\n                if (isTemplate) {\r\n                    _this.app.services.moduleSystem.init(_this.app.settings.baseExecutionPath);\r\n                    _this.app.services.moduleSystem[\"import\"](_this.app.services.transformer.transform(JSON.stringify(obj)).output).then(function (exported) {\r\n                        try {\r\n                            _this.parse(exported[\"default\"] || exported, \"af\", 0).then(resolve, reject);\r\n                        }\r\n                        catch (e) {\r\n                            reject(e);\r\n                        }\r\n                    }, function (rs) { return reject(rs); });\r\n                }\r\n                else\r\n                    _this.parse(obj, \"af\", 0).then(resolve, reject);\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n    return Processor;\r\n}());\r\nexports.Processor = Processor;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nexports.__esModule = true;\r\nexports.Navigation = void 0;\r\n//import { INavigation, IAppLoaded, LogLevel, IEventData, IApp, promisedElement, element} from \"../types\";\r\nvar components_1 = require(\"../components\");\r\nvar types_1 = require(\"@appfibre/types\");\r\nfunction parse(url) {\r\n    var qs = /(?:\\?)([^#]*)(?:#.*)?$/.exec(url);\r\n    var params = {};\r\n    var index = 0;\r\n    if (qs)\r\n        qs[1].split('&').forEach(function (p) {\r\n            var v = p.split('=');\r\n            params[v.length === 2 ? v[0] : index++] = v[v.length - 1];\r\n        });\r\n    return {\r\n        path: qs && qs[1] ? qs[1] : ''\r\n    };\r\n}\r\nfunction clone(o) {\r\n    if (Array.isArray(o))\r\n        return o.map(function (o) { return clone(o); });\r\n    else if (typeof o === \"object\") {\r\n        var z = Object.create(o);\r\n        Object.keys(o).forEach(function (k) { return z[k] = o[k]; });\r\n        return z;\r\n    }\r\n    else\r\n        return o;\r\n}\r\nvar Navigation = {\r\n    current: parse(typeof location === \"object\" ? location.href : ''),\r\n    resolve: function transform(container) {\r\n        var _a;\r\n        var url = typeof location === \"undefined\" ? '' : location.href;\r\n        if (this.controllers && Object.keys(this.controllers).length === 0)\r\n            return this.main;\r\n        for (var c in this.controllers)\r\n            if ((this.controllers[c].container ? this.controllers[c].container : '') == (container || '')) {\r\n                var match = (_a = this.controllers[c].match) === null || _a === void 0 ? void 0 : _a.test(url);\r\n                this.services.logger.log(types_1.types.app.LogLevel.Trace, \"Route \\\"\" + url + \"\\\" \" + (match ? 'matched' : 'did not match') + \" controller \\\"\" + c + \"\\\"\");\r\n                if (match === undefined || match === true) {\r\n                    var qs = /(?:\\?)([^#]*)(?:#.*)?$/.exec(url);\r\n                    var params = {};\r\n                    var index = 0;\r\n                    if (qs)\r\n                        qs[1].split('&').forEach(function (p) {\r\n                            var v = p.split('=');\r\n                            params[v.length === 2 ? v[0] : index++] = v[v.length - 1];\r\n                        });\r\n                    return this.controllers[c].resolve.call(this, params);\r\n                }\r\n            }\r\n            else\r\n                this.services.logger.log(types_1.types.app.LogLevel.Trace, \"Container \" + (container || '(blank)') + \" does not match controller \" + c + \"'s container \" + (this.controllers[c].container || '(blank)'));\r\n        return [\"Error\", {}, \"Could not locate controller matching \" + url];\r\n    },\r\n    a: function inject(app) {\r\n        return /** @class */ (function (_super) {\r\n            __extends(a, _super); //app.services.UI.Component \r\n            function a(props, context) {\r\n                return _super.call(this, props, context) || this;\r\n            }\r\n            a.prototype.click = function (e) {\r\n                app.services.navigation.current = parse(this.props.href);\r\n                var topParent = parent;\r\n                while (topParent.parent !== topParent)\r\n                    topParent = topParent.parent;\r\n                if (topParent.history && topParent.history.pushState)\r\n                    topParent.history.pushState(null, '', this.props.href);\r\n                else\r\n                    topParent.location.replace(this.props.href);\r\n                app.services.events.publish({ type: \"Navigation.Redirect\", correlationId: this.props.container, data: this.props.href });\r\n                if (e && e.nativeEvent && e.nativeEvent.preventDefault)\r\n                    e.nativeEvent.preventDefault();\r\n                return false;\r\n            };\r\n            a.prototype.render = function () {\r\n                return _super.prototype.render.call(this, [\"a\", __assign(__assign({}, this.props), { onClick: this.click.bind(this) }), this.props.children]);\r\n                //return app.services.UI.processElement([\"a\", {...this.props, onClick: this.click.bind(this)}, this.props.children], 0, undefined);\r\n            };\r\n            return a;\r\n        }(components_1.BaseComponent(app) //app.services.UI.Component \r\n        ));\r\n    },\r\n    Container: function transform(a, c) {\r\n        var app = this;\r\n        return [/** @class */ (function (_super) {\r\n                __extends(NavigationContainer, _super);\r\n                function NavigationContainer(props, context) {\r\n                    var _this = _super.call(this, props, context) || this;\r\n                    _this.state = { a: props.a, c: props.c };\r\n                    _this.onRedirect = _this.onRedirect.bind(_this);\r\n                    return _this;\r\n                }\r\n                NavigationContainer.prototype.onRedirect = function ( /*event:types.app.IEventData<any>*/) {\r\n                    var e = clone(this.props.c);\r\n                    if (Array.isArray(e))\r\n                        e.forEach(function (c, i) { if (Array.isArray(c))\r\n                            c[1].key = Date.now() + i; });\r\n                    this.setState({ c: e });\r\n                };\r\n                NavigationContainer.prototype.componentWillMount = function () {\r\n                    app.services.events.subscribe({ type: \"Navigation.Redirect\" }, this.onRedirect);\r\n                };\r\n                NavigationContainer.prototype.componentWillUnmount = function () {\r\n                    app.services.events.unsubscribe({ type: \"Navigation.Redirect\" }, this.onRedirect);\r\n                };\r\n                NavigationContainer.prototype.render = function () {\r\n                    return _super.prototype.render.call(this, this.state.c);\r\n                };\r\n                return NavigationContainer;\r\n            }(components_1.BaseComponent(app))), { a: a, c: c }];\r\n    }\r\n};\r\nexports.Navigation = Navigation;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.Transformer = void 0;\r\nvar types_1 = __importDefault(require(\"@appfibre/types\"));\r\nvar Parsers_1 = require(\"./Parsers\");\r\nvar Transformer = /** @class */ (function () {\r\n    function Transformer(settings) {\r\n        this.reservedWords = ['function', 'for', 'var', 'this', 'self', 'null'];\r\n        this.type = \"Transformer\";\r\n        if (settings) {\r\n            settings.parsers = settings.parsers || Parsers_1.Parsers;\r\n            this.settings = __assign(__assign({}, settings), { indent: settings.indent || '\\t', compact: settings.compact || false, module: settings.module || types_1[\"default\"].app.ModuleSystem.None, namedExports: settings.namedExports === undefined ? true : settings.namedExports });\r\n        }\r\n        else\r\n            this.settings = { module: types_1[\"default\"].app.ModuleSystem.ES, parsers: Parsers_1.Parsers };\r\n        /*this.settings.parsers[\".app\"] =  (obj:any, parseSettings:types.app.ITransformOutput, offset:number) => {\r\n            var obj2:{[key:string]:any} = {};\r\n            var keys = Object.keys(obj);\r\n            for (var key in keys) obj2[keys[key] == \".app\" ? \"main\" : keys[key]] = obj[keys[key]];\r\n            return `${this.process.call(this, { \".new\": {\".require\": \"@appfibre/webapp#WebApp\"}, \"arguments\": [obj2]}, true, true, offset)}`;\r\n        };*/\r\n    }\r\n    Transformer.prototype.loadModule = function (tc, val, depth) {\r\n        var m = val.indexOf('#') > 0 ? val.substr(0, val.indexOf('#')) : val;\r\n        if (val[0] === \"~\") {\r\n            return \"\" + this.process({ \".function\": null, arguments: \"loader\", \"return\": { \".code\": \"loader.load('\" + (m[1] === \"/\" ? '.' : '') + m.substr(1) + \"')\" + (val.length > m.length ? val.substring(m.length).replace('#', '.') : '') + \";\" } }, tc, { format: \"js\", esc: false, et: false, depth: depth });\r\n        }\r\n        if (this.settings.module.toLowerCase() === types_1[\"default\"].app.ModuleSystem.ES.toLowerCase())\r\n            m = val.indexOf('#', m.length + 2) > -1 ? val.substr(0, val.indexOf('#', m.length + 2) - 1) : val;\r\n        if (tc.imports.indexOf(m) === -1)\r\n            tc.imports.push(m);\r\n        return \"_\" + tc.imports.indexOf(m) + (val.length > m.length ? val.substring(m.length).replace('#', '.') : '');\r\n    };\r\n    Transformer.prototype.format = function (lines, indent) {\r\n        var lt = this.settings.compact ? \"\" : \"\\n\";\r\n        var tab = this.settings.compact ? \"\" : this.settings.indent || \"\\t\";\r\n        return lt + new Array(indent + 1).join(tab) + lines.join(\",\" + lt + new Array(indent + 1).join(tab)) + lt + new Array(indent).join(tab);\r\n    };\r\n    Transformer.prototype.process = function (obj, tc, context) {\r\n        var _this = this;\r\n        var result = { format: \"json\", output: '' };\r\n        if (Array.isArray(obj))\r\n            result.output = (context.et ? \"\" : \"[\") + this.format.call(this, obj.map(function (e) { return _this.process(e, tc, { format: context.format, esc: context.esc, et: false, depth: context.depth + 1 }).output; }), context.depth) + (context.et ? \"\" : \"]\");\r\n        else if (obj && typeof obj === \"object\") {\r\n            var keys = Object.keys(obj);\r\n            var processed = false;\r\n            for (var k in keys)\r\n                if (!processed && keys[k].length > 0 && keys[k].charAt(0) === '.') {\r\n                    if (keys[k].charAt(1) === \".\")\r\n                        obj[keys[k]] = undefined;\r\n                    else if (this.settings.parsers && this.settings.parsers[keys[k]]) {\r\n                        processed = true;\r\n                        var r = this.settings.parsers[keys[k]](obj, this, tc, context);\r\n                        result.output = r.output;\r\n                        result.format = r.format;\r\n                    }\r\n                    else {\r\n                        //debugger;\r\n                        throw new Error(\"Could not locate parser \" + keys[k].substr(1));\r\n                    }\r\n                }\r\n            if (!processed)\r\n                result.output = (context.et ? \"\" : \"{\") + this.format.call(this, keys.filter(function (k) { return k.length < 2 || k.substr(0, 2) != '..'; }).map(function (k) { return (_this.reservedWords.indexOf(k) > -1 || /[^a-z0-9]/i.test(k) ? _this.skey(k) : k) + \":\" + (_this.settings.compact ? '' : ' ') + _this.process(obj[k], tc, { format: context.format, esc: context.esc, et: false, depth: context.depth + 1 }).output; }), context.depth) + (context.et ? \"\" : \"}\");\r\n        }\r\n        else if (typeof obj === \"function\") // object not JSON...\r\n            result.output = obj.toString();\r\n        else\r\n            result.output = typeof obj === \"string\" && context.esc ? JSON.stringify(obj) : obj;\r\n        return result;\r\n    };\r\n    Transformer.prototype.skey = function (key) {\r\n        return JSON.stringify(((key.charAt(0) === \"'\" && key.charAt(key.length - 1) === \"'\") || (key.charAt(0) === '\"' && key.charAt(key.length - 1) === '\"')) ? key.slice(1, key.length - 2) : key);\r\n    };\r\n    Transformer.prototype.processExports = function (context, obj) {\r\n        var _this = this;\r\n        var keys = Object.keys(obj);\r\n        var validkeys = keys.filter(function (k) { return k.indexOf(' ') === -1 && k.indexOf('/') === -1 && k.indexOf('-') === -1 && _this.reservedWords.indexOf(k) === -1; });\r\n        var isDefault = keys.length === 1 && keys[0] === 'default';\r\n        var nl = this.settings.compact ? '' : '\\n';\r\n        var sp = this.settings.compact ? '' : ' ';\r\n        var vr = this.settings.preferConst ? 'const' : 'var';\r\n        switch (this.settings.module.toLowerCase()) {\r\n            case \"umd\":\r\n            case \"commonjs\":\r\n            case \"cjs\":\r\n                //for (var req in r) output.code += `${vr} _${r[req]}${sp}=${sp}require('${req}');${nl}`;\r\n                //throw this.process(obj[\"default\"], context, { format: context.format, esc: true, et: false, depth: 0});\r\n                context.output += keys.map(function (key) { return \"module.exports[\" + _this.skey(key) + \"]\" + sp + \"=\" + sp + _this.process(obj[key], context, { format: context.format, esc: true, et: false, depth: 0 }).output + \";\"; }).join(nl);\r\n                if (!isDefault)\r\n                    context.output += nl + \"module.exports[\\\"default\\\"]\" + sp + \"=\" + sp + \"{\" + sp + keys.map(function (key) { return _this.skey(key) + \": \" + _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 0 }).output; }).join(nl) + \" };\";\r\n                break;\r\n            case \"es\":\r\n                if (isDefault)\r\n                    context.output += \"export default\" + sp + this.process(obj[\"default\"], context, { format: context.format, esc: true, et: false, depth: 0 }).output + \";\";\r\n                else {\r\n                    context.output += \"export default\" + sp + \"{\" + this.format(keys.map(function (key) { return validkeys.indexOf(key) === -1 ? \"\\\"\" + key + \"\\\": \" + _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 1 }).output : key + \":\" + sp + (_this.settings.namedExports ? key : _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 2 }).output); }), 1) + \"};\";\r\n                    if (this.settings.namedExports && validkeys.length > 0)\r\n                        context.output = validkeys.map(function (key) { return \"export \" + vr + \" \" + key + sp + \"=\" + sp + _this.process(obj[key], context, { format: context.format, esc: true, et: false, depth: 1 }).output + \";\"; }).join(nl) + (\"\" + (nl + context.output + nl));\r\n                }\r\n                break;\r\n            case \"raw\":\r\n                if (isDefault) {\r\n                    //html\r\n                    var result = this.process(obj[\"default\"], context, { format: \"json\", esc: true, et: false, depth: 1 });\r\n                    context.output += result.output;\r\n                    context.format = result.format;\r\n                }\r\n                else\r\n                    context.output += \"\" + (isDefault ? this.process(obj[\"default\"], context, { format: \"json\", esc: true, et: false, depth: 1 }).output : \"{\" + this.format(keys.map(function (key) { return validkeys.indexOf(key) === -1 || /[^a-z0-9]/i.test(key) ? \"\\\"\" + key + \"\\\": \" + _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 1 }).output : key + \":\" + sp + _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 2 }).output; }), 1) + \"}\");\r\n                break;\r\n            default:\r\n                context.output += \"return \" + (isDefault ? this.process(obj[\"default\"], context, { format: \"json\", esc: true, et: false, depth: 1 }).output : \"{\" + this.format(keys.map(function (key) { return validkeys.indexOf(key) === -1 || /[^a-z0-9]/i.test(key) ? \"\\\"\" + key + \"\\\": \" + _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 1 }) : key + \":\" + sp + _this.process(obj[key], context, { format: \"json\", esc: true, et: false, depth: 2 }).output; }), 1) + \"}\") + \";\";\r\n        }\r\n    };\r\n    Transformer.prototype.resolve = function (relUrl, parentUrl) {\r\n        var backslashRegEx = /\\\\/g;\r\n        if (relUrl.indexOf('\\\\') !== -1)\r\n            relUrl = relUrl.replace(backslashRegEx, '/');\r\n        // protocol-relative\r\n        if (relUrl[0] === '/' && relUrl[1] === '/') {\r\n            return parentUrl.slice(0, parentUrl.indexOf(':') + 1) + relUrl;\r\n        }\r\n        // relative-url\r\n        else if (relUrl[0] === '.' && (relUrl[1] === '/' || relUrl[1] === '.' && (relUrl[2] === '/' || relUrl.length === 2 && (relUrl += '/')) ||\r\n            relUrl.length === 1 && (relUrl += '/')) ||\r\n            relUrl[0] === '/') {\r\n            var parentProtocol = parentUrl.slice(0, parentUrl.indexOf(':') + 1);\r\n            // Disabled, but these cases will give inconsistent results for deep backtracking\r\n            //if (parentUrl[parentProtocol.length] !== '/')\r\n            //  throw new Error('Cannot resolve');\r\n            // read pathname from parent URL\r\n            // pathname taken to be part after leading \"/\"\r\n            var pathname = void 0;\r\n            if (parentUrl[parentProtocol.length + 1] === '/') {\r\n                // resolving to a :// so we need to read out the auth and host\r\n                if (parentProtocol !== 'file:') {\r\n                    pathname = parentUrl.slice(parentProtocol.length + 2);\r\n                    pathname = pathname.slice(pathname.indexOf('/') + 1);\r\n                }\r\n                else {\r\n                    pathname = parentUrl.slice(8);\r\n                }\r\n            }\r\n            else {\r\n                // resolving to :/ so pathname is the /... part\r\n                pathname = parentUrl.slice(parentProtocol.length + (parentUrl[parentProtocol.length] === '/' ? 1 : 0));\r\n            }\r\n            if (relUrl[0] === '/')\r\n                return parentUrl.slice(0, parentUrl.length - pathname.length - 1) + relUrl;\r\n            // join together and split for removal of .. and . segments\r\n            // looping the string instead of anything fancy for perf reasons\r\n            // '../../../../../z' resolved to 'x/y' is just 'z'\r\n            var segmented = pathname.slice(0, pathname.lastIndexOf('/') + 1) + relUrl;\r\n            var output = [];\r\n            var segmentIndex = -1;\r\n            for (var i = 0; i < segmented.length; i++) {\r\n                // busy reading a segment - only terminate on '/'\r\n                if (segmentIndex !== -1) {\r\n                    if (segmented[i] === '/') {\r\n                        output.push(segmented.slice(segmentIndex, i + 1));\r\n                        segmentIndex = -1;\r\n                    }\r\n                }\r\n                // new segment - check if it is relative\r\n                else if (segmented[i] === '.') {\r\n                    // ../ segment\r\n                    if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i + 2 === segmented.length)) {\r\n                        output.pop();\r\n                        i += 2;\r\n                    }\r\n                    // ./ segment\r\n                    else if (segmented[i + 1] === '/' || i + 1 === segmented.length) {\r\n                        i += 1;\r\n                    }\r\n                    else {\r\n                        // the start of a new segment as below\r\n                        segmentIndex = i;\r\n                    }\r\n                }\r\n                // it is the start of a new segment\r\n                else {\r\n                    segmentIndex = i;\r\n                }\r\n            }\r\n            // finish reading out the last segment\r\n            if (segmentIndex !== -1)\r\n                output.push(segmented.slice(segmentIndex));\r\n            return parentUrl.slice(0, parentUrl.length - pathname.length) + output.join('');\r\n        }\r\n        return relUrl;\r\n    };\r\n    Transformer.prototype.processImports = function (transform) {\r\n        var _this = this;\r\n        var nl = this.settings.compact ? '' : '\\n';\r\n        var sp = this.settings.compact ? '' : ' ';\r\n        var vr = this.settings.preferConst ? 'const' : 'var';\r\n        var s = {};\r\n        var r = {};\r\n        var s2 = {};\r\n        var r2 = {};\r\n        if (transform.imports.length > 0)\r\n            for (var i = 0; i < transform.imports.length; i++) {\r\n                var ext = transform.imports[i][0] === \"~\";\r\n                if (transform.imports[i].indexOf('#') > -1) {\r\n                    var module_name = transform.imports[i].substr(0, transform.imports[i].indexOf('#'));\r\n                    if ((ext ? s2 : s)[module_name] === undefined)\r\n                        (ext ? s2 : s)[module_name] = {};\r\n                    (ext ? s2 : s)[module_name][transform.imports[i].substr(module_name.length + 1)] = i;\r\n                }\r\n                else\r\n                    (ext ? r2 : r)[transform.imports[i]] = i;\r\n            }\r\n        switch (this.settings.module.toLowerCase()) {\r\n            case \"umd\":\r\n            case \"commonjs\":\r\n            case \"cjs\":\r\n                for (var req in r)\r\n                    transform.output = vr + \" _\" + r[req] + sp + \"=\" + sp + \"require(\\\"\" + req + \"\\\");\" + nl + transform.output;\r\n                break;\r\n            case \"amd\":\r\n                var exp = Object.keys(r).map(function (key, index) { return \"if (typeof _\" + index + \" === \\\"object\\\" && !Array.isArray(_\" + index + \")) { _\" + index + \".__esModule = \\\"\" + _this.resolve(key, transform.name || location.href) + \"\\\"; } else _\" + index + \" = {default: _\" + index + \", __esModule: \\\"\" + _this.resolve(key, transform.name || location.href) + \"\\\"};\"; }).join('\\n');\r\n                transform.output = \"define(\" + (Object.keys(r).length > 0 ? \"[\" + Object.keys(r).map(function (key) { return \"\" + _this.skey(key); }).join(\", \") + \"], \" : '') + \"function (\" + Object.keys(r).map(function (key) { return '_' + r[key]; }).join(\", \") + \") { \\n\" + exp + \" \" + transform.output + \" });\" + nl;\r\n                break;\r\n            case \"es\":\r\n                transform.output = Object.keys(s).map(function (key) { return \"import {\" + Object.keys(s[key]).map(function (k) { return k + \" as _\" + s[key][k]; }).join(',' + sp) + \"} from \" + _this.skey(key) + \";\" + nl; }).join('') + Object.keys(r).map(function (key) { return \"import * as _\" + r[key] + \" from \" + _this.skey(key.substr(key[0] == \"~\" ? 1 : 0)) + \";\" + nl; }).join('') + transform.output;\r\n                break;\r\n            default:\r\n                for (var req in r)\r\n                    transform.output = vr + \" _\" + r[req] + sp + \"=\" + sp + \"require(\\\"\" + req + \"\\\");\" + nl + transform.output;\r\n        }\r\n        if (Object.keys(s2).length > 0 || Object.keys(r2).length > 0) {\r\n            switch (this.settings.runtimeModule ? this.settings.runtimeModule.toLowerCase() : \"none\") {\r\n                case \"umd\":\r\n                case \"commonjs\":\r\n                case \"cjs\":\r\n                    for (var req in r2)\r\n                        transform.output = vr + \" _\" + r2[req] + sp + \"=\" + sp + \"require(\\\"\" + req + \"\\\");\" + nl + transform.output;\r\n                    break;\r\n                case \"amd\":\r\n                    transform.output = \"define(\" + (Object.keys(r2).length > 0 ? \"[\" + Object.keys(r).map(function (key) { return \"\" + _this.skey(key); }).join(\", \") + \"], \" : '') + \"function (\" + Object.keys(r2).map(function (key) { return '_' + r2[key]; }).join(\", \") + \") { \" + transform.output + \" });\" + nl;\r\n                    break;\r\n                case \"es\":\r\n                    transform.output = Object.keys(s2).map(function (key) { return \"import {\" + Object.keys(s2[key]).map(function (k) { return k.substr(1) + \" as _\" + s[key][k]; }).join(',' + sp) + \"} from \" + _this.skey(key.substr(1)) + \";\" + nl; }).join('') + Object.keys(r2).map(function (key) { return \"import * as _\" + r2[key] + \" from '\" + key.substr(1) + \"';\" + nl; }).join('') + transform.output;\r\n                    break;\r\n                default:\r\n                    for (var req in r2)\r\n                        transform.output = vr + \" _\" + r2[req] + sp + \"=\" + sp + \"require(\\\"\" + req + \"\\\");\" + nl + transform.output;\r\n            }\r\n        }\r\n    };\r\n    Transformer.prototype.transformTemplate = function (template, name) {\r\n        var output = { name: name, imports: [], exports: {}, references: {}, compositeObject: false, output: '', format: \"json\" };\r\n        this.processExports(output, template == undefined || template == null || Array.isArray(template) || typeof (template) !== 'object' || Object.keys(template).filter(function (k) { return k[0] == '.'; }).length > 0 ? { \"default\": template } : template);\r\n        this.processImports(output);\r\n        return output;\r\n    };\r\n    Transformer.prototype.transform = function (input, name) {\r\n        var template;\r\n        try {\r\n            template = JSON.parse(input);\r\n        }\r\n        catch (e) {\r\n            //console.log(JSON.stringify(this.settings));\r\n            if (this.settings.dangerouslyProcessJavaScript || this.settings.dangerouslyProcessJavaScript === undefined) {\r\n                try {\r\n                    template = Function(\"return (\" + input + \");\")();\r\n                    if (this.settings.dangerouslyProcessJavaScript === undefined)\r\n                        console.warn(\"Warning: \" + (name || '') + \" is not JSON compliant: \" + e.message + \".  Set option \\\"dangerouslyProcessJavaScript\\\" to true to hide this message.\\r\\n\" + input);\r\n                }\r\n                catch (f) {\r\n                    throw new Error(\"Unable to process JSON or Javascript \" + (name || '') + \": \" + f.message);\r\n                }\r\n            }\r\n            else\r\n                throw new Error(\"Unable to parse JSON \" + (name || '') + \": \" + e.message);\r\n        }\r\n        try {\r\n            return this.transformTemplate(template == undefined || template == null || Array.isArray(template) || typeof (template) !== 'object' || Object.keys(template).filter(function (k) { return k[0] == '.'; }).length > 0 ? { \"default\": template } : template, name);\r\n        }\r\n        catch (e) {\r\n            throw new Error(\"Unable to transform js template: \" + e.message + \"\\r\\n\" + e.stack);\r\n        }\r\n    };\r\n    return Transformer;\r\n}());\r\nexports.Transformer = Transformer;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.Transformer = exports.Processor = exports.Parsers = exports.Loader = exports.Navigation = exports.Events = exports.Data = void 0;\r\nvar Data_1 = require(\"./Data\");\r\nexports.Data = Data_1.Data;\r\nvar Events_1 = require(\"./Events\");\r\nexports.Events = Events_1.Events;\r\nvar Loader_1 = require(\"./Loader\");\r\nexports.Loader = Loader_1.Loader;\r\nvar Parsers_1 = require(\"./Parsers\");\r\nexports.Parsers = Parsers_1.Parsers;\r\nvar Processor_1 = require(\"./Processor\");\r\nexports.Processor = Processor_1.Processor;\r\nvar Navigation_1 = require(\"./Navigation\");\r\nexports.Navigation = Navigation_1.Navigation;\r\nvar Transformer_1 = require(\"./Transformer\");\r\nexports.Transformer = Transformer_1.Transformer;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.App = void 0;\r\nvar services_1 = require(\"./services\");\r\nvar types_1 = __importDefault(require(\"@appfibre/types\"));\r\nvar App = /** @class */ (function () {\r\n    function App(app) {\r\n        var _this = this;\r\n        try {\r\n            Object.keys(app).forEach(function (k) { var d = Object.getOwnPropertyDescriptor(app, k); if (d)\r\n                Object.defineProperty(_this, k, d); });\r\n            this.main = app.main;\r\n            this.settings = app.settings;\r\n            this.info = app.info;\r\n            this.settings.logLevel = this.settings.logLevel || types_1[\"default\"].app.LogLevel.Error;\r\n            this.settings.cdn = this.settings.cdn || {};\r\n            var logger_1 = app.services && app.services.logger ? (typeof app.services.logger === \"object\" ? app.services.logger : new app.services.logger(this)) : null;\r\n            var s = app.services; //|| {};\r\n            if (!s.UI)\r\n                throw new Error(\"UI required\");\r\n            s.logger = { log: function (logLevel, title, optionalParameters) {\r\n                    if (logLevel <= (_this && _this.settings && _this.settings.logLevel ? (types_1[\"default\"].app.LogLevel[_this.settings.logLevel] || 2) : 2))\r\n                        logger_1 ? logger_1.log.bind(_this, logLevel, title, optionalParameters) : [function ( /*title?:any, optionalParameters?:any[]*/) { }, console.error, console.error, console.warn, console.info, console.info][logLevel](title + '\\r\\n', optionalParameters || [_this]);\r\n                } };\r\n            s.transformer = s.transformer ? (typeof s.transformer === \"object\" ? s.transformer : new s.transformer(this)) : new services_1.Transformer({ module: types_1[\"default\"].app.ModuleSystem.AMD });\r\n            s.moduleSystem = s.moduleSystem ? (typeof s.moduleSystem === \"object\" ? s.moduleSystem : new s.moduleSystem(this)) : new services_1.Loader(this);\r\n            s.navigation = s.navigation ? (typeof s.navigation === \"object\" ? s.navigation : new s.navigation(this)) : services_1.Navigation;\r\n            s.data = s.data ? (typeof s.data === \"object\" ? s.data : new s.data(this)) : services_1.Data;\r\n            s.UI = typeof s.UI === \"object\" ? s.UI : new s.UI(this);\r\n            s.events = s.events ? (typeof s.events === \"object\" ? s.events : new s.events(this)) : new services_1.Events(this);\r\n            s.externals = s.externals || {};\r\n            this.services = { moduleSystem: s.moduleSystem, processor: new services_1.Processor(this), transformer: s.transformer, logger: s.logger, UI: s.UI, navigation: s.navigation, events: s.events, externals: s.externals };\r\n            this.controllers = {};\r\n            if (app.controllers)\r\n                for (var c in app.controllers) {\r\n                    var co = app.controllers[c];\r\n                    this.controllers[c] = typeof co === \"object\" ? co : new (co)(this);\r\n                }\r\n            this.components = app.components;\r\n            if (typeof this.components === \"object\" && !this.components[\"Navigation\"])\r\n                this.components[\"Navigation\"] = services_1.Navigation;\r\n            if (typeof this.components === \"object\" && !this.components[\"Data\"])\r\n                this.components[\"Data\"] = services_1.Data;\r\n        }\r\n        catch (ex) {\r\n            console.error(ex);\r\n            throw ex;\r\n        }\r\n    }\r\n    App.prototype.initApp = function () {\r\n        //if (!this.options.web) this.options.web = { };\r\n        var _this = this;\r\n        this.services.moduleSystem.init(this.settings.baseExecutionPath);\r\n        return Promise.resolve(this.services.UI).then(function (UI) {\r\n            if (UI) {\r\n                _this.services.UI = UI;\r\n                if (_this.services.UI.init)\r\n                    _this.services.UI.init();\r\n            }\r\n            else\r\n                throw new Error('Unable to initialize UI, ensure that you have loaded a UI framework');\r\n        });\r\n    };\r\n    return App;\r\n}());\r\nexports.App = App;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nexports.__esModule = true;\r\nexports.Services = exports.App = exports.types = void 0;\r\nvar types_1 = require(\"@appfibre/types\");\r\nexports.types = types_1.types;\r\nvar app_1 = require(\"./app\");\r\nexports.App = app_1.App;\r\nvar Services = __importStar(require(\"./services\"));\r\nexports.Services = Services;\r\n","\"use strict\";\r\n/*interface fiber\r\n{\r\n    dom?: any\r\n    type:string,\r\n    props: object,\r\n    child: any,\r\n    children: any[]\r\n}\r\n\r\ninterface action\r\n*/\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nexports.__esModule = true;\r\nexports.createElement = exports.render = exports.Component = void 0;\r\nvar requestIdleCallback = global.requestIdleCallback;\r\nfunction createElement(type, props, children) {\r\n    return {\r\n        type: type,\r\n        props: __assign(__assign({}, props), { children: children != undefined ? typeof children === \"string\" ? [createTextElement(children)] : children : [] })\r\n    };\r\n}\r\nexports.createElement = createElement;\r\nfunction createTextElement(text) {\r\n    return {\r\n        type: \"TEXT_ELEMENT\",\r\n        props: {\r\n            nodeValue: text,\r\n            children: []\r\n        }\r\n    };\r\n}\r\nfunction createDom(fiber) {\r\n    if (fiber.type == \"TEXT_ELEMENT\")\r\n        return document.createTextNode(fiber.props.nodeValue || \"\");\r\n    var dom = document.createElement(fiber.type);\r\n    updateDom(dom, {}, fiber.props);\r\n    return dom;\r\n}\r\nvar isEvent = function (key) { return key.startsWith(\"on\"); };\r\nvar isProperty = function (key) {\r\n    return key !== \"children\" && !isEvent(key);\r\n};\r\nvar isNew = function (prev, next) { return function (key) {\r\n    return prev[key] !== next[key];\r\n}; };\r\nvar isGone = function (_prev, next) { return function (key) { return !(key in next); }; };\r\nfunction updateDom(dom, prevProps, nextProps) {\r\n    //Remove old or changed event listeners\r\n    Object.keys(prevProps)\r\n        .filter(isEvent)\r\n        .filter(function (key) {\r\n        return !(key in nextProps) ||\r\n            isNew(prevProps, nextProps)(key);\r\n    })\r\n        .forEach(function (name) {\r\n        var eventType = name\r\n            .toLowerCase()\r\n            .substring(2);\r\n        dom.removeEventListener(eventType, prevProps[name]);\r\n    });\r\n    // Remove old properties\r\n    Object.keys(prevProps)\r\n        .filter(isProperty)\r\n        .filter(isGone(prevProps, nextProps))\r\n        .forEach(function (name) { return dom.setAttribute(name, \"\"); });\r\n    // Set new or changed properties\r\n    Object.keys(nextProps)\r\n        .filter(isProperty)\r\n        .filter(isNew(prevProps, nextProps))\r\n        .forEach(function (name) { return dom.setAttribute(name, typeof nextProps[name] === 'string' ? nextProps[name] : JSON.stringify(nextProps[name])); });\r\n    // Add event listeners\r\n    Object.keys(nextProps)\r\n        .filter(isEvent)\r\n        .filter(isNew(prevProps, nextProps))\r\n        .forEach(function (name) {\r\n        var eventType = name\r\n            .toLowerCase()\r\n            .substring(2);\r\n        dom.addEventListener(eventType, nextProps[name]);\r\n    });\r\n}\r\nfunction commitRoot() {\r\n    deletions.forEach(commitWork);\r\n    commitWork(wipRoot.child);\r\n    currentRoot = wipRoot;\r\n    wipRoot = null;\r\n}\r\nfunction commitWork(fiber) {\r\n    if (!fiber) {\r\n        return;\r\n    }\r\n    var domParentFiber = fiber.parent;\r\n    while (!domParentFiber.dom) {\r\n        domParentFiber = domParentFiber.parent;\r\n    }\r\n    var domParent = domParentFiber.dom;\r\n    if (fiber.effectTag === \"PLACEMENT\" &&\r\n        fiber.dom != null) {\r\n        domParent.appendChild(fiber.dom);\r\n    }\r\n    else if (fiber.effectTag === \"UPDATE\" &&\r\n        fiber.dom != null) {\r\n        updateDom(fiber.dom, fiber.alternate.props, fiber.props);\r\n    }\r\n    else if (fiber.effectTag === \"DELETION\") {\r\n        commitDeletion(fiber, domParent);\r\n    }\r\n    commitWork(fiber.child);\r\n    commitWork(fiber.sibling);\r\n}\r\nfunction commitDeletion(fiber, domParent) {\r\n    if (fiber.dom) {\r\n        domParent.removeChild(fiber.dom);\r\n    }\r\n    else {\r\n        commitDeletion(fiber.child, domParent);\r\n    }\r\n}\r\nfunction render(element, container) {\r\n    wipRoot = {\r\n        dom: container,\r\n        props: {\r\n            children: [element]\r\n        },\r\n        alternate: currentRoot\r\n    };\r\n    deletions = [];\r\n    nextUnitOfWork = wipRoot;\r\n}\r\nexports.render = render;\r\nvar nextUnitOfWork = null;\r\nvar currentRoot = null;\r\nvar wipRoot = null;\r\nvar deletions = null;\r\nfunction workLoop(deadline) {\r\n    var shouldYield = false;\r\n    while (nextUnitOfWork && !shouldYield) {\r\n        nextUnitOfWork = performUnitOfWork(nextUnitOfWork);\r\n        shouldYield = deadline.timeRemaining() < 1;\r\n    }\r\n    if (!nextUnitOfWork && wipRoot) {\r\n        commitRoot();\r\n    }\r\n    requestIdleCallback(workLoop);\r\n}\r\nrequestIdleCallback(workLoop);\r\nfunction performUnitOfWork(fiber) {\r\n    var isFunctionComponent = fiber.type instanceof Function;\r\n    if (isFunctionComponent) {\r\n        updateFunctionComponent(fiber);\r\n    }\r\n    else {\r\n        updateHostComponent(fiber);\r\n    }\r\n    if (fiber.child) {\r\n        return fiber.child;\r\n    }\r\n    var nextFiber = fiber;\r\n    while (nextFiber) {\r\n        if (nextFiber.sibling) {\r\n            return nextFiber.sibling;\r\n        }\r\n        nextFiber = nextFiber.parent;\r\n    }\r\n}\r\nvar wipFiber = null;\r\nvar hookIndex = null;\r\nfunction updateFunctionComponent(fiber) {\r\n    wipFiber = fiber;\r\n    hookIndex = 0;\r\n    wipFiber.hooks = [];\r\n    var children = [fiber.type(fiber.props)];\r\n    reconcileChildren(fiber, children);\r\n}\r\nfunction useState(initial) {\r\n    var oldHook = wipFiber.alternate &&\r\n        wipFiber.alternate.hooks &&\r\n        wipFiber.alternate.hooks[hookIndex];\r\n    var hook = {\r\n        state: oldHook ? oldHook.state : initial,\r\n        queue: []\r\n    };\r\n    var actions = oldHook ? oldHook.queue : [];\r\n    actions.forEach(function (action) {\r\n        hook.state = action(hook.state);\r\n    });\r\n    var setState = function (action) {\r\n        hook.queue.push(action);\r\n        wipRoot = {\r\n            dom: currentRoot.dom,\r\n            props: currentRoot.props,\r\n            alternate: currentRoot\r\n        };\r\n        nextUnitOfWork = wipRoot;\r\n        deletions = [];\r\n    };\r\n    wipFiber.hooks.push(hook);\r\n    hookIndex++;\r\n    return [hook.state, setState];\r\n}\r\nfunction updateHostComponent(fiber) {\r\n    if (!fiber.dom) {\r\n        fiber.dom = createDom(fiber);\r\n    }\r\n    reconcileChildren(fiber, fiber.props.children);\r\n}\r\nfunction reconcileChildren(wipFiber, elements) {\r\n    var index = 0;\r\n    var oldFiber = wipFiber.alternate && wipFiber.alternate.child;\r\n    var prevSibling = null;\r\n    while (index < elements.length ||\r\n        oldFiber != null) {\r\n        var element = elements[index];\r\n        var newFiber = null;\r\n        var sameType = oldFiber &&\r\n            element &&\r\n            element.type == oldFiber.type;\r\n        if (sameType) {\r\n            newFiber = {\r\n                type: oldFiber.type,\r\n                props: element.props,\r\n                dom: oldFiber.dom,\r\n                parent: wipFiber,\r\n                alternate: oldFiber,\r\n                effectTag: \"UPDATE\"\r\n            };\r\n        }\r\n        if (element && !sameType) {\r\n            newFiber = {\r\n                type: element.type,\r\n                props: element.props,\r\n                dom: null,\r\n                parent: wipFiber,\r\n                alternate: null,\r\n                effectTag: \"PLACEMENT\"\r\n            };\r\n        }\r\n        if (oldFiber && !sameType) {\r\n            oldFiber.effectTag = \"DELETION\";\r\n            deletions.push(oldFiber);\r\n        }\r\n        if (oldFiber) {\r\n            oldFiber = oldFiber.sibling;\r\n        }\r\n        if (index === 0) {\r\n            wipFiber.child = newFiber;\r\n        }\r\n        else if (element && prevSibling && !prevSibling.sibling) {\r\n            prevSibling.sibling = newFiber;\r\n        }\r\n        prevSibling = newFiber;\r\n        index++;\r\n    }\r\n}\r\nvar Component = /** @class */ (function () {\r\n    function Component(props, context) {\r\n        this.props = props || {};\r\n        this.context = context;\r\n        this.state = {};\r\n        var s = useState({});\r\n        this.state = s[0];\r\n        this.setState = function (_args) {\r\n            //console.log(args);\r\n        };\r\n        this.render = function () {\r\n            debugger;\r\n            return 'ok';\r\n        };\r\n    }\r\n    Component.prototype.setState = function (_state, _callback) {\r\n    };\r\n    Component.prototype.forceUpdate = function (_callback) {\r\n        debugger;\r\n        //this.setState((prevState: S, _props: P) => prevState, callback);\r\n        //updateHostComponent()\r\n    };\r\n    Component.prototype.render = function (props) {\r\n        alert(JSON.stringify(props));\r\n        debugger;\r\n        //return createElement(this, props, props.children);\r\n    };\r\n    return Component;\r\n}());\r\nexports.Component = Component;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.WebUI = void 0;\r\nvar types_1 = require(\"@appfibre/types\");\r\nvar ui_1 = require(\"../components/ui\");\r\nvar WebUI = /** @class */ (function () {\r\n    function WebUI(app) {\r\n        this.type = \"UI\";\r\n        this.app = app;\r\n        this.app.settings = this.app.settings || {};\r\n    }\r\n    WebUI.prototype.init = function () {\r\n        if (typeof window === \"object\") {\r\n            var obj = (Object.getOwnPropertyDescriptor(window, \"preact\") || Object.getOwnPropertyDescriptor(window, \"React\"));\r\n            if (obj) {\r\n                this.createElement = obj.value.h || obj.value.createElement;\r\n                this.Component = obj.value.Component;\r\n                this.renderInternal = obj.value.render || (Object.getOwnPropertyDescriptor(window, \"ReactDOM\") || { value: null }).value.render;\r\n            }\r\n            else {\r\n                this.createElement = ui_1.createElement;\r\n                this.Component = ui_1.Component;\r\n                this.renderInternal = ui_1.render;\r\n            }\r\n        }\r\n    };\r\n    WebUI.prototype.render = function (ui, parent, mergeWith) {\r\n        if (this.renderInternal) {\r\n            this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Trace, \"WebUI.render\", [ui]);\r\n            return this.renderInternal(ui, parent, mergeWith);\r\n        }\r\n        else\r\n            this.app.services.logger.log.call(this, types_1.types.app.LogLevel.Error, \"Unable to render UI - No UI framework detected. \\nEnsure that you have referenced a UI framework before executing the application, or specify using app.services.UI\");\r\n    };\r\n    return WebUI;\r\n}());\r\nexports.WebUI = WebUI;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nexports.__esModule = true;\r\nexports.WebApp = void 0;\r\nvar core_1 = require(\"@appfibre/core\");\r\nvar WebUI_1 = require(\"./services/WebUI\");\r\nvar WebApp = /** @class */ (function (_super) {\r\n    __extends(WebApp, _super);\r\n    //info: fibre.IInfo\r\n    function WebApp(app /*, context?:object*/) {\r\n        if (app === void 0) { app = { main: [] }; }\r\n        var _this = this;\r\n        var t = __assign(__assign({}, app), { info: __assign({ browser: core_1.types.webapp.browserType.Unknown }, app.info), services: __assign({ UI: app.services && app.services.UI || WebUI_1.WebUI }, app.services), settings: app.settings || {}, controllers: __assign({}, app.controllers), components: __assign({}, app.components) });\r\n        _this = _super.call(this, t) || this;\r\n        return _this;\r\n    }\r\n    WebApp.prototype.initApp = function () {\r\n        if (typeof document === \"object\") { // web app\r\n            var w = window;\r\n            var g = global;\r\n            var d = document;\r\n            var bt = core_1.types.webapp.browserType.Unknown;\r\n            if (w && g && d) {\r\n                if (g.InstallTrigger !== undefined)\r\n                    this.info.browser = core_1.types.webapp.browserType.FireFox;\r\n                else if ( /*@cc_on!@*/false || !!d.documentMode)\r\n                    bt = core_1.types.webapp.browserType.IE;\r\n                else if (!!w.StyleMedia)\r\n                    bt = core_1.types.webapp.browserType.Edge;\r\n                else if (/constructor/i.test(w.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!w['safari'] || (typeof g.safari !== 'undefined' && g.safari.pushNotification)))\r\n                    bt = core_1.types.webapp.browserType.Safari;\r\n                else if (!!w.chrome && (!!w.chrome.webstore || !!w.chrome.runtime))\r\n                    bt = core_1.types.webapp.browserType.Chrome;\r\n                else if ((Object.getOwnPropertyDescriptor(window, \"opr\") && Object.getOwnPropertyDescriptor(window, \"addons\")) || Object.getOwnPropertyDescriptor(window, \"opera\") || navigator.userAgent.indexOf(' OPR/') >= 0)\r\n                    bt = core_1.types.webapp.browserType.Opera;\r\n                if ((bt === core_1.types.webapp.browserType.Chrome || bt === core_1.types.webapp.browserType.Opera) && !!w.CSS)\r\n                    bt = core_1.types.webapp.browserType.Blink;\r\n            }\r\n            this.info.browser = bt;\r\n            if (!this.settings.baseExecutionPath && document.head)\r\n                this.settings.baseExecutionPath = document.head.baseURI;\r\n        }\r\n        return _super.prototype.initApp.call(this);\r\n    };\r\n    WebApp.prototype.run = function () {\r\n        var _this = this;\r\n        this.services.logger.log.call(this, core_1.types.app.LogLevel.Trace, 'App.run');\r\n        return new Promise(function (resolve, reject) {\r\n            Promise.resolve(_this.initApp()).then(function () {\r\n                var main = _this.services.navigation.resolve.apply(_this);\r\n                _this.render(main).then(resolve, function (err) { _this.services.logger.log.call(_this, core_1.types.app.LogLevel.Error, err.message, err.stack); reject(err); _this.render([\"pre\", {}, err.stack]); });\r\n            }, function (e) { _this.services.logger.log.call(_this, core_1.types.app.LogLevel.Error, e); reject(e); });\r\n        });\r\n    };\r\n    WebApp.prototype.render = function (ui) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.services.logger.log.call(_this, core_1.types.app.LogLevel.Trace, 'App.render', [{ ui: ui }]);\r\n            _this.services.processor.process(ui).then(function (value) {\r\n                try {\r\n                    var target = null;\r\n                    if (typeof document === \"object\") { // web app\r\n                        if (typeof _this.settings.target === \"string\")\r\n                            target = document.getElementById(_this.settings.target);\r\n                        else if (_this.settings.target && _this.settings.target.tagName === \"IFRAME\") {\r\n                            var fr = _this.settings.target;\r\n                            if (fr.contentDocument)\r\n                                target = !fr.contentDocument.body ? fr.contentDocument.createElement('BODY') : fr.contentDocument.body;\r\n                        }\r\n                        else if (!document.body)\r\n                            document.body = document.createElement('BODY');\r\n                        else\r\n                            target = document.body;\r\n                        if (target && target.tagName === \"BODY\") {\r\n                            var body_1 = target;\r\n                            var doc = (body_1.ownerDocument ? body_1.ownerDocument : document.body);\r\n                            target = doc.getElementById(\"main\") || function () {\r\n                                var d = body_1.appendChild((body_1.ownerDocument ? body_1.ownerDocument : document.body).createElement(\"div\"));\r\n                                if (this.settings && this.settings.fullHeight) {\r\n                                    body_1.style.height = body_1.style.height || \"100vh\";\r\n                                    body_1.style.margin = body_1.style.margin || \"0px\";\r\n                                    d.style.height = \"100%\";\r\n                                }\r\n                                return d;\r\n                            }.apply(_this);\r\n                            if (target && !target.id)\r\n                                target.setAttribute(\"id\", \"main\");\r\n                        }\r\n                        else if (_this.settings.target !== null)\r\n                            throw new Error(\"Cannot locate target (\" + (_this.settings.target ? 'not specified' : _this.settings.target) + \") in html document body.\");\r\n                        if (_this.settings.title)\r\n                            document.title = _this.settings.title;\r\n                        //if (module && module.hot) module.hot.accept();\r\n                        if (target && target.hasChildNodes())\r\n                            target.innerHTML = \"\";\r\n                    }\r\n                    //throw new Error(\"Document node undefined.  Are you running WebApp in the context of a browser?\");\r\n                    resolve(_this.services.UI.render(value, target ? target : undefined));\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }, function (r) { return reject(r); });\r\n        });\r\n    };\r\n    return WebApp;\r\n}(core_1.App));\r\nexports.WebApp = WebApp;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nexports.__esModule = true;\r\nexports.Parsers = void 0;\r\nvar core_1 = require(\"@appfibre/core\");\r\nvar WebApp_1 = require(\"../WebApp\");\r\nexports.Parsers = __assign(__assign({}, core_1.Services.Parsers), { \r\n    /*\".app\": (transformer:types.app.ITransformer, tc:types.app.ITransformtc, obj:any, offset:number) => {\r\n        var obj2:{[key:string]:any} = {};\r\n        var keys = Object.keys(obj);\r\n        for (var key in keys) obj2[keys[key] == \".app\" ? \"main\" : keys[key]] = obj[keys[key]];\r\n        console.log(WebApp);\r\n        return `${transformer.process({ \".new\": {\".import\": \"@appfibre/webapp#WebApp\"}, \"arguments\": [obj2]}, tc, true, true, offset)}`;\r\n    }*/\r\n    \".app\": function (jst, transformer, tc, context) {\r\n        if (!tc.references['WebApp'])\r\n            tc.references['WebApp'] = WebApp_1.WebApp;\r\n        var obj2 = {};\r\n        var keys = Object.keys(jst);\r\n        for (var key in keys)\r\n            obj2[keys[key] == \".app\" ? \"main\" : keys[key]] = jst[keys[key]];\r\n        return transformer.process({ \".new\": \"WebApp\", \"arguments\": [obj2] }, tc, context);\r\n    } });\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexports.__esModule = true;\r\nexports.Transformer = void 0;\r\nvar types_1 = require(\"@appfibre/types\");\r\nvar core_1 = require(\"@appfibre/core\");\r\nvar Parsers_1 = require(\"../services/Parsers\");\r\nvar Transformer = /** @class */ (function (_super) {\r\n    __extends(Transformer, _super);\r\n    function Transformer(settings) {\r\n        var _this = this;\r\n        if (settings && !settings.parsers)\r\n            settings.parsers = Parsers_1.Parsers;\r\n        _this = _super.call(this, settings || { module: types_1.types.app.ModuleSystem.AMD, parsers: Parsers_1.Parsers }) || this;\r\n        return _this;\r\n    }\r\n    return Transformer;\r\n}(core_1.Services.Transformer));\r\nexports.Transformer = Transformer;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar core_1 = require(\"@appfibre/core\");\r\nvar Transformer_1 = require(\"./Transformer\");\r\nvar Parsers_1 = require(\"./Parsers\");\r\ncore_1.Services.Transformer = Transformer_1.Transformer;\r\ncore_1.Services.Parsers = Parsers_1.Parsers;\r\nexports[\"default\"] = core_1.Services;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nexports.__esModule = true;\r\nexports.WebApp = exports.Services = exports.App = void 0;\r\nvar core_1 = require(\"@appfibre/core\");\r\nexports.App = core_1.App;\r\nvar WebApp_1 = require(\"./WebApp\");\r\nexports.WebApp = WebApp_1.WebApp;\r\n//import { HtmlUI } from './services/HtmlUI';\r\nvar services_1 = __importDefault(require(\"./services\"));\r\nexports.Services = services_1[\"default\"];\r\n","require('systemjs/dist/s.js');\r\n//require('systemjs/dist/extras/transform');\r\nrequire('systemjs/dist/extras/named-exports.js');\r\nrequire('systemjs/dist/extras/named-register.js');\r\nrequire('systemjs/dist/extras/amd.js');\r\n//const externals = { \"@appfibre/core\": require('@appfibre/core'), \"@appfibre/webapp\": require('@appfibre/webapp'), \"@appfibre/types\": require('@appfibre/types')  };\r\n//const externals = { \"@appfibre/core\": require('@appfibre/core'), \"@appfibre/webapp\": require('@appfibre/webapp'), \"@appfibre/types\": require('@appfibre/types')  };\r\nif (!this.Promise) this.Promise = require('pinkie');\r\nconst _jst = new (require(\"@appfibre/webapp\").Services.Transformer)({ module: 'amd'});\r\nconst WebApp = require(\"@appfibre/webapp\").WebApp;\r\n\r\nconst systemJSPrototype = System.constructor.prototype;\r\n//const _jst = new externals[\"@appfibre/core\"].Transformer({ module: 'amd'});\r\n\r\nsystemJSPrototype.jst = function(input, name) {\r\n\treturn _jst.transform(input, name);\r\n}\r\n\r\nconst instantiate = systemJSPrototype.instantiate;\r\nsystemJSPrototype.instantiate = function (url, parent) {\r\n\tif (url[0] === '@') {\r\n\t\tif (externals[url])\r\n\t\t\treturn [[], function (_export) {\r\n\t\t\t\t_export('default', externals[url]);\r\n\t\t\t\tconst k = Object.keys(externals[url]);\r\n\t\t\t\tfor (let i in k) _export(k[i], externals[url][k[i]]);\r\n\t\t\t\treturn { execute () {}};\r\n\t\t\t}];\r\n\t\telse throw new Error(`Requested component (${url}) not embedded into bundle or cdn not registered`);\r\n\t}\r\n\tif (url.slice(-5) === '.wasm' /*|| url.slice(-3) === '.js'*/)\r\n\t\treturn instantiate.call(this, url, parent);\r\n\telse if (url.slice(-4) === '.css' )\r\n\t{\r\n\t\tvar link = document.createElement('link');\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.href = url;\r\n\t\tdocument.head.appendChild(link);\r\n\t\treturn [[], function () { return {\"execute\": undefined }}];\r\n\t}\r\n\r\n\tconst loader = this;\r\n\treturn fetch(url)\r\n\t\t.then(function (response) {\r\n\t\t\ttry {\r\n\t\t\t\tswitch (response.contentType) {\r\n\t\t\t\t\tcase \"application/javascript\":\r\n\t\t\t\t\t\t\treturn {output: response.text};\r\n\t\t\t\t\tcase \"application/json\":\r\n\t\t\t\t\t\t\treturn systemJSPrototype.jst(response.text, url);\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t return {output: \"define(function() { return \\'\" + response.text.replace(/\\'/g, \"\\\\\\'\").replace(/\\\"/g, \"\\\\\\\"\") + \"\\';})\"};\r\n\t\t\t\t}\r\n\t\t\t} catch (ex) {\r\n\t\t\t\tconsole.error('Error transforming ' + url + ': ' + ex.description || ex.message, ex.stack || '', [response.text]);\r\n\t\t\t\tthrow ex;\r\n\t\t\t}\r\n\t\t}, (reason) => {throw new Error('Fetch error: ' + reason + (parent ? ' loading from  ' + parent : ''));})\r\n\t\t.then((source) => {   \r\n    try{\r\n\t\tlet keys = source.references ? Object.keys(source.references) : [];\r\n\t\tlet values = source.references ? Object.values(source.references) : [];\r\n\t\tkeys.push(`${source.output};\\n//# sourceURL=' + ${url}`);\r\n\t\tFunction.apply({}, keys).apply({}, values); \r\n\t\t//Function('WebApp', `${source.output};\\n//# sourceURL=' + ${url}`)(WebApp); \r\n\t  \treturn loader.getRegister();  \r\n    } catch (ex) {\r\n      console.error('Error evaluating ' + url + ': ' + ex.description || ex.message, ex.stack || '', [source]);\r\n      throw ex;\r\n    }\r\n  }).catch((message) => {console.error('Error instantiating ' + url + ': ' + message.description || message.message, message.stack || \"\"); throw new Error(message);});\r\n};\r\n\r\n// Hookable transform function!\r\n/*function transform (id, source, contentType) {\r\n\tswitch (contentType) {\r\n\r\n\t\tdefault:\r\n\t\t\treturn \"return \" + replace()\r\n\t}\r\n\treturn (id.indexOf('.json')>-1 || id.indexOf('.jst')>-1) ? new externals['@appfibre/webapp'].Transformer({ module: 'amd'}).transform(source, id).output : source;\r\n}*/\r\n\r\nconst resolve = systemJSPrototype.resolve;\r\nsystemJSPrototype.resolve = function (id, parentUrl) {\r\n\t// This is required because the plugins for codemirror refers to ../../lib/codemirror which doesn't exist when executing from within SystemJS\r\n\t// The code corresponds with a code entry when loading the component System.Register('../../lib/codemirror', [@cdnjs/codemirror/codemirror.js]);\r\n\tif (this.registerRegistry[id]){\r\n\t\tvar r = this.registerRegistry[id];\r\n\t\tif (Array.isArray(r) && typeof r[0] === \"string\")\r\n\t\t\treturn r[0];\r\n\t}\r\n\tif (id[0] === '@') \r\n\t\treturn id;\r\n\treturn resolve.call(this, id, parentUrl);\r\n};\r\n\r\nfunction fetch (url) {\r\n\treturn new Promise(((resolve, reject) => {\r\n    let rq = new XMLHttpRequest();\r\n    rq.open('GET', url);\r\n    rq.credentials = 'same-origin';\r\n    rq.onload = function() { if (rq.status == 200) resolve({text: rq.responseText, contentType: (rq.getResponseHeader('content-type')||'text/plain').split(';')[0].toLowerCase()}); else reject(rq.status + ':' + rq.statusText)}\r\n    rq.onerror = function() {reject(rq.status + ': ' + rq.statusText);}\r\n    rq.send();\r\n  }));\r\n}"],"names":["hasSelf","self","envGlobal","global","baseUrl","location","href","split","lastSepIndex","lastIndexOf","slice","backslashRegEx","resolveIfNotPlainOrUrl","relUrl","parentUrl","indexOf","replace","length","parentProtocol","pathname","segmented","output","segmentIndex","i","push","pop","join","hasSymbol","Symbol","toStringTag","REGISTRY","SystemJS","systemJSPrototype","prototype","import","id","loader","Promise","resolve","then","load","getOrCreateLoad","C","topLevelLoad","createContext","parentId","url","lastRegister","register","deps","declare","getRegister","_lastRegister","undefined","firstParentUrl","importerSetters","ns","Object","create","defineProperty","value","instantiatePromise","instantiate","registration","Error","_export","name","h","changed","p","declared","importId","meta","e","execute","setters","linkPromise","instantiation","all","map","dep","setter","depId","depLoad","I","n","depLoads","d","catch","err","er","L","E","instantiateAll","loaded","postOrderExec","nullContext","freeze","seen","depLoadPromises","forEach","depLoadPromise","doExec","execPromise","call","System","window","addEventListener","error","systemRegister","reject","script","document","createElement","charset","async","crossOrigin","head","removeChild","src","appendChild","importScripts","resolved","systemPrototype","constructor","lastRegisterDeclare","registerDeclare","_context","defaultExport","declaration","registerRegistry","apply","arguments","parentURL","emptyInstantiation","unsupportedRequire","emptyFn","requireExportsModule","createAMDRegister","amdDefineDeps","amdDefineExec","exports","module","depModules","splice","index","idx","default","amdExec","define","concat","Array","amd","PENDING","SETTLED","FULFILLED","REJECTED","NOOP","isNode","process","emit","asyncSetTimer","setImmediate","setTimeout","asyncQueue","asyncTimer","asyncFlush","asyncCall","callback","arg","invokeResolver","resolver","promise","resolvePromise","rejectPromise","reason","invokeCallback","subscriber","owner","settled","_state","_data","handleThenable","TypeError","val","fulfill","publishFulfillment","publishRejection","publish","_then","_handled","notifyRejectionHandled","onFulfillment","onRejection","fulfilled","rejected","promises","isArray","results","remaining","race","UI","app","UI_1","LogLevel","ModuleSystem","webapp","browserType","registry","itemType","licenseType","types","app_1","registry_1","webapp_1","__extends","this","extendStatics","b","setPrototypeOf","__proto__","hasOwnProperty","__","seed","BaseComponent","inject","generateId","Math","random","_super","props","context","_this","key","renderInternal","services","processor","processElement","c","render","children","Component","Async","state","o","setState","BaseComponent_1","Async_1","clone","z","keys","k","SM","Bind","s","data","subscribers","moduleSystem","x","visit","childArray","bind","setValue","path","Function","getValue","subscribe","a","onChange","v","target","obj","components_1","Data","transform","format","str","toString","Events","_a","callbacks","onWindowMessage","ev","type","eventType","correlationId","unsubscribe","event","subscriptions","response","postMessage","r","__awaiter","thisArg","_arguments","P","generator","adopt","step","next","result","done","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","iterator","op","basePath","nodeRequire","run","source","m","console","log","Loader","parent","res","fetch","credentials","ok","status","statusText","text","init","headers","_b","contentType","get","toLowerCase","_source","_target","__spreadArrays","il","j","jl","basepath","tmpdir","env","INIT_CWD","__dirname__","cwd","chdir","_exp","require","mainModule","_load","references","refkeys","refs","values","_references","systemjs","getOwnPropertyDescriptor","jst","input","transformer","proxy","require$$0","require$$1","moduleName","normalizedParentName","u","rj","__esModule","settings","cdn","substr","rq","XMLHttpRequest","open","setRequestHeader","onload","responseText","getResponseHeader","onerror","send","_transformer","_tc","tc","loadModule","esc","et","depth","indent","s_xa","Inject","inj","Processor","cache","chars","Proxy","main","createClass","B","class_1","locate","resource","parts","part","getFunctionName","trim","processElementInternal","element","parentkey","logger","types_1","generateKey","parse","level","Trace","unwrapDefault","stack","o2","fullpath","substring","obj_1","components","class_2","some","Date","now","isTemplate","baseExecutionPath","JSON","stringify","exported","rs","__assign","assign","qs","exec","params","Navigation","current","container","controllers","match","test","click","navigation","topParent","history","pushState","events","nativeEvent","preventDefault","onClick","Container","NavigationContainer","onRedirect","componentWillMount","componentWillUnmount","__importDefault","mod","Transformer","reservedWords","parsers","Parsers_1","Parsers","compact","None","namedExports","ES","imports","lines","lt","tab","processed","charAt","filter","skey","processExports","validkeys","isDefault","nl","sp","vr","preferConst","processImports","s2","r2","ext","module_name","req","exp","runtimeModule","transformTemplate","template","compositeObject","dangerouslyProcessJavaScript","warn","message","Data_1","Events_1","Loader_1","Processor_1","Navigation_1","Transformer_1","App","info","logLevel","logger_1","title","optionalParameters","services_1","AMD","externals","co","ex","initApp","__createBinding","k2","enumerable","__setModuleDefault","__importStar","Services","requestIdleCallback","createTextElement","nodeValue","createDom","fiber","createTextNode","dom","updateDom","isEvent","startsWith","isProperty","isNew","prev","isGone","_prev","prevProps","nextProps","removeEventListener","setAttribute","commitRoot","deletions","commitWork","wipRoot","child","currentRoot","domParentFiber","domParent","effectTag","alternate","commitDeletion","sibling","nextUnitOfWork","workLoop","deadline","shouldYield","performUnitOfWork","timeRemaining","isFunctionComponent","updateFunctionComponent","updateHostComponent","nextFiber","wipFiber","hookIndex","hooks","reconcileChildren","useState","initial","oldHook","hook","queue","actions","action","elements","oldFiber","prevSibling","newFiber","sameType","_args","_callback","forceUpdate","alert","WebUI","ui_1","ui","mergeWith","WebApp","browser","core_1","Unknown","WebUI_1","w","bt","InstallTrigger","FireFox","documentMode","IE","StyleMedia","Edge","HTMLElement","safari","pushNotification","Safari","chrome","webstore","runtime","Chrome","navigator","userAgent","Opera","CSS","Blink","baseURI","getElementById","tagName","fr","contentDocument","body_1","doc","ownerDocument","fullHeight","style","height","margin","hasChildNodes","innerHTML","WebApp_1","obj2","require$$4","_jst","require$$5","link","rel","description"],"mappings":"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"}